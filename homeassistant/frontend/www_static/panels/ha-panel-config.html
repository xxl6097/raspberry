<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="ha-config-section"><template><style include="iron-flex ha-style">.content{padding:28px 20px 0;max-width:1040px;margin:0 auto;}.header{@apply (--paper-font-display1);opacity:var(--dark-primary-opacity);}.together{margin-top:32px;}.intro{@apply (--paper-font-subhead);width:100%;max-width:400px;margin-right:40px;opacity:var(--dark-primary-opacity);}.panel{margin-top:-24px;}.panel ::slotted(*){margin-top:24px;display:block;}.narrow.content{max-width:640px;}.narrow .together{margin-top:20px;}.narrow .header{@apply (--paper-font-headline);}.narrow .intro{font-size:14px;padding-bottom:20px;margin-right:0;max-width:500px;}</style><div class$="[[computeContentClasses(isWide)]]"><div class="header"><slot name="header"></slot></div><div class$="[[computeClasses(isWide)]]"><div class="intro"><slot name="introduction"></slot></div><div class="flex panel"><slot></slot></div></div></div></template></dom-module><script>Polymer({is:"ha-config-section",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},isWide:{type:Boolean,value:!1}},computeContentClasses:function(e){return e?"content ":"content narrow"},computeClasses:function(e){return"together layout "+(e?"horizontal":"vertical narrow")}});</script><dom-module id="ha-config-navigation" assetpath="dashboard/"><template><style include="iron-flex">paper-card{display:block;}paper-item{cursor:pointer;}</style><paper-card><template is="dom-repeat" items="[[pages]]"><template is="dom-if" if="[[_computeLoaded(hass, item)]]"><paper-item on-tap="_navigate"><paper-item-body two-line="">[[_computeCaption(item)]]<div secondary="">[[_computeDescription(item)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></template></paper-card></template></dom-module><script>Polymer({is:"ha-config-navigation",properties:{hass:{type:Object},pages:{type:Array,value:[{domain:"core",caption:"General",description:"Validate your configuration file and control the server.",loaded:!0},{domain:"customize",caption:"Customization",description:"Customize your entities.",loaded:!0},{domain:"automation",caption:"Automation",description:"Create and edit automations."},{domain:"script",caption:"Script",description:"Create and edit scripts."},{domain:"zwave",caption:"Z-Wave",description:"Manage your Z-Wave network."}]}},_computeLoaded:function(i,o){return o.loaded||window.hassUtil.isComponentLoaded(i,o.domain)},_computeCaption:function(i){return i.caption},_computeDescription:function(i){return i.description},_navigate:function(i){history.pushState(null,null,"/config/"+i.model.item.domain),this.fire("location-changed")}});</script><dom-module id="ha-config-cloud-menu" assetpath="dashboard/"><template><style include="iron-flex">paper-card{display:block;}paper-item{cursor:pointer;}</style><paper-card><paper-item on-tap="_navigate"><paper-item-body two-line="">Home Assistant Cloud<template is="dom-if" if="[[account]]"><div secondary="">Logged in as [[account.email]]</div></template><template is="dom-if" if="[[!account]]"><div secondary="">Not logged in</div></template></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></paper-card></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigCloudMenu=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.NavigateMixin(Polymer.Element)),_createClass(t,[{key:"_navigate",value:function(){this.navigate("/config/cloud")}}],[{key:"is",get:function(){return"ha-config-cloud-menu"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,account:Object}}}]),t}();customElements.define(HaConfigCloudMenu.is,HaConfigCloudMenu);</script><dom-module id="ha-config-dashboard" assetpath="dashboard/"><template><style include="iron-flex ha-style">.content{padding-bottom:32px;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">Configuration</div></app-toolbar></app-header><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">Configure Home Assistant</span> <span slot="introduction">Here it is possible to configure your components and Home Assistant. Not everything is possible to configure from the UI yet, but we're working on it.</span><template is="dom-if" if="[[computeIsCloudLoaded(hass)]]"><ha-config-cloud-menu hass="[[hass]]" account="[[account]]"></ha-config-cloud-menu></template><ha-config-navigation hass="[[hass]]"></ha-config-navigation></ha-config-section></div></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),HaConfigDashboard=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"computeIsCloudLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"cloud")}}],[{key:"is",get:function(){return"ha-config-dashboard"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,account:Object,narrow:Boolean,showMenu:Boolean}}}]),t}();customElements.define(HaConfigDashboard.is,HaConfigDashboard);</script><dom-module id="ha-config-section-core" assetpath="core/"><template><style include="iron-flex ha-style">.validate-container{@apply (--layout-vertical);@apply (--layout-center-center);height:140px;}.validate-result{color:var(--google-green-500);font-weight:500;margin-bottom:1em;}.config-invalid{margin:1em 0;}.config-invalid .text{color:var(--google-red-500);font-weight:500;}.config-invalid paper-button{float:right;}.validate-log{white-space:pre-wrap;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">Server Management</span> <span slot="introduction">Changing your configuration can be a tiresome process. We know. This section will try to make your life a little bit easier.</span><paper-card heading="Configuration Validation"><div class="card-content">Validate your configuration if you recently made some changes to your configuration and want to make sure that it is all valid.<template is="dom-if" if="[[!validateLog]]"><div class="validate-container"><template is="dom-if" if="[[!validating]]"><div class="validate-result" id="result">[[validateResult]]</div><paper-button raised="" on-tap="validateConfig">check config</paper-button></template><template is="dom-if" if="[[validating]]"><paper-spinner active=""></paper-spinner></template></div></template><template is="dom-if" if="[[validateLog]]"><div class="config-invalid"><span class="text">Configuration invalid.</span><paper-button raised="" on-tap="validateConfig">check config</paper-button></div><div id="configLog" class="validate-log">[[validateLog]]</div></template></div></paper-card><paper-card heading="Configuration Reloading"><div class="card-content">Some parts of Home Assistant can reload without requiring a restart. Hitting reload will unload their current configuration and load the new one.</div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="homeassistant" service="reload_core_config">Reload Core</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="group" service="reload" hidden$="[[!groupLoaded(hass)]]">Reload Groups</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="automation" service="reload" hidden$="[[!automationLoaded(hass)]]">Reload Automation</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="script" service="reload" hidden$="[[!scriptLoaded(hass)]]">Reload Scripts</ha-call-service-button></div></paper-card><paper-card heading="Server Management"><div class="card-content">Control your Home Assistant serverâ€¦ from Home Assistant.</div><div class="card-actions warning"><ha-call-service-button class="warning" hass="[[hass]]" domain="homeassistant" service="restart">Restart</ha-call-service-button><ha-call-service-button class="warning" hass="[[hass]]" domain="homeassistant" service="stop">Stop</ha-call-service-button></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigSectionCore=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"groupLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"group")}},{key:"automationLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"automation")}},{key:"scriptLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"script")}},{key:"validateConfig",value:function(){this.validating=!0,this.validateLog="",this.validateResult="";var e=this;this.hass.callApi("POST","config/core/check_config").then(function(t){e.validating=!1,(e.configValid="valid"===t.result)?e.validateResult="Valid!":e.validateLog=t.errors})}}],[{key:"is",get:function(){return"ha-config-section-core"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean,value:!1},validating:{type:Boolean,value:!1},validateResult:{type:String,value:""},validateLog:{type:String,value:""}}}}]),t}();customElements.define(HaConfigSectionCore.is,HaConfigSectionCore);</script><dom-module id="ha-config-section-hassbian" assetpath="core/"><template><style include="iron-flex ha-style">.header{font-size:16px;margin-bottom:1em;}.header .status{font-size:14px;float:right;}.card-actions paper-button{color:var(--default-primary-color);font-weight:500;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">Bring Hassbian to the next level</span> <span slot="introduction">Discover exciting add-ons to enhance your Home Assistant installation. Add an MQTT server or control a connected TV via HDMI-CEC.</span><template is="dom-if" if="[[suiteStatus]]"><template is="dom-repeat" items="[[computeSuiteKeys(suiteStatus)]]" as="suiteKey"><paper-card><div class="card-content"><div class="header">[[computeTitle(suiteKey)]] <span class="status">[[computeSuiteStatus(suiteStatus, suiteKey)]]</span></div>[[computeSuiteDescription(suiteStatus, suiteKey)]]</div><div class="card-actions"><paper-button on-tap="suiteMoreInfoTapped">LEARN MORE</paper-button><template is="dom-if" if="[[computeShowInstall(suiteStatus, suiteKey)]]"><paper-button on-tap="suiteActionTapped">INSTALL</paper-button></template></div></paper-card></template></template></ha-config-section></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),HaConfigSectionHassbian=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.Element),_createClass(e,[{key:"updateStatus",value:function(){this.hass.callApi("GET","config/hassbian/suites").then(function(t){this.suiteStatus=t;for(var e=!1,n=Object.keys(t),s=0;s<n.length;s++)if("installing"===t[n[s]].state){e=!0;break}e&&this.async(this.updateStatus,5e3)}.bind(this))}},{key:"attached",value:function(){this.updateStatus=this.updateStatus.bind(this),this.updateStatus()}},{key:"computeSuiteKeys",value:function(t){return Object.keys(t).sort(function(e,n){var s="installing"===t[e].state,i="installing"===t[n].state;if(s&&i);else{if(s)return-1;if(i)return 1}return e<n?-1:e>n?1:0})}},{key:"computeSuiteDescription",value:function(t,e){return t[e].description}},{key:"computeTitle",value:function(t){return t.substr(0,1).toUpperCase()+t.substr(1)}},{key:"computeSuiteStatus",value:function(t,e){var n=t[e].state.replace(/_/," ");return n.substr(0,1).toUpperCase()+n.substr(1)}},{key:"computeShowStatus",value:function(t,e){var n=t[e].state;return"installing"!==n&&"not_installed"!==n}},{key:"computeShowInstall",value:function(t,e){return"not_installed"===t[e].state}},{key:"suiteMoreInfoTapped",value:function(){}},{key:"suiteActionTapped",value:function(){this.hass.callApi("POST","config/hassbian/suites/openzwave/install").then(this.updateStatus)}}],[{key:"is",get:function(){return"ha-config-section-hassbian"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean},suiteStatus:{type:Object,value:null}}}}]),e}();customElements.define(HaConfigSectionHassbian.is,HaConfigSectionHassbian);</script><dom-module id="ha-config-section-themes" assetpath="core/"><template><ha-config-section is-wide="[[isWide]]"><span slot="header">Set a theme</span> <span slot="introduction">Choose 'Backend-selected' to use whatever theme the backend chooses or pick a theme for this device.</span><paper-card><div class="card-content"><paper-dropdown-menu label="Theme" vertical-align="bottom"><paper-listbox slot="dropdown-content" selected="{{selectedTheme}}"><template is="dom-repeat" items="[[themes]]" as="theme"><paper-item>[[theme]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),_get=function e(t,n,s){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,s)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(s)},HaConfigSectionThemes=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"ready",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.hass.selectedTheme&&this.themes.indexOf(this.hass.selectedTheme)>0?this.selectedTheme=this.themes.indexOf(this.hass.selectedTheme):this.hass.selectedTheme||(this.selectedTheme=0)}},{key:"computeThemes",value:function(e){return e?["Backend-selected","default"].concat(Object.keys(e.themes.themes).sort()):[]}},{key:"selectionChanged",value:function(e,t){t>0&&t<this.themes.length?e.selectedTheme!==this.themes[t]&&this.fire("settheme",this.themes[t]):0===t&&""!==e.selectedTheme&&this.fire("settheme","")}}],[{key:"is",get:function(){return"ha-config-section-themes"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean},themes:{type:Array,computed:"computeThemes(hass)"},selectedTheme:{type:Number}}}},{key:"observers",get:function(){return["selectionChanged(hass, selectedTheme)"]}}]),t}();customElements.define(HaConfigSectionThemes.is,HaConfigSectionThemes);</script><dom-module id="ha-config-core" assetpath="core/"><template><style include="iron-flex ha-style">.content{padding-bottom:32px;}.border{margin:32px auto 0;border-bottom:1px solid rgba(0, 0, 0, 0.12);max-width:1040px;}.narrow .border{max-width:640px;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Core</div></app-toolbar></app-header><div class$="[[computeClasses(isWide)]]"><ha-config-section-core is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-core><template is="dom-if" if="[[computeIsThemesLoaded(hass)]]"><div class="border"></div><ha-config-section-themes is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-themes></template><template is="dom-if" if="[[computeIsHassbianLoaded(hass)]]"><div class="border"></div><ha-config-section-hassbian is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-hassbian></template></div></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigCore=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"computeClasses",value:function(e){return e?"content":"content narrow"}},{key:"computeIsHassbianLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"config.hassbian")}},{key:"computeIsZwaveLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"config.zwave")}},{key:"computeIsThemesLoaded",value:function(e){return e.themes&&e.themes.themes&&Object.keys(e.themes.themes).length}},{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"ha-config-core"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean}}}]),t}();customElements.define(HaConfigCore.is,HaConfigCore);</script><dom-module id="hass-subpage" assetpath="../../src/layouts/"><template><style include="ha-style"></style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">[[title]]</div></app-toolbar></app-header><slot></slot></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HassSubpage=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"hass-subpage"}},{key:"properties",get:function(){return{title:String}}}]),t}();customElements.define(HassSubpage.is,HassSubpage);</script><dom-module id="ha-config-cloud-login" assetpath="cloud/"><template><style include="iron-flex ha-style">.content{padding-bottom:24px;}paper-card{display:block;}paper-item{cursor:pointer;}paper-card:last-child{margin-top:24px;}h1{@apply (--paper-font-headline);margin:0;}.error{color:var(--google-red-500);}.card-actions{display:flex;justify-content:space-between;align-items:center;}[hidden]{display:none;}</style><hass-subpage title="Cloud Login"><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">Home Assistant Cloud</span> <span slot="introduction">The Home Assistant Cloud allows you to opt-in to functions that will bring your Home Assistant experience to the next level.<p><i>Home Assistant will never share information with our cloud without your prior permission. </i></p></span><paper-card><div class="card-content"><h1>Sign In</h1><paper-input label="Email" id="emailInput" type="email" value="{{email}}" on-keydown="_keyDown"></paper-input><paper-input label="Password" value="{{_password}}" type="password" on-keydown="_keyDown"></paper-input><div class="error" hidden$="[[!error]]">[[error]]</div></div><div class="card-actions"><ha-progress-button on-tap="_handleLogin" progress="[[_requestInProgress]]">Sign in</ha-progress-button><button class="link" hidden="[[_requestInProgress]]" on-click="_handleForgotPassword">forgot password?</button></div></paper-card><paper-card><paper-item on-tap="_handleRegister"><paper-item-body two-line="">Create Account<div secondary="">It is free and allows easy integration with voice assistants.</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></paper-card></ha-config-section></div></hass-subpage></template></dom-module><script>function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}var _createClass=function(){function e(e,o){for(var n=0;n<o.length;n++){var r=o[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(o,n,r){return n&&e(o.prototype,n),r&&e(o,r),o}}(),HaConfigCloudLogin=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,window.hassMixins.NavigateMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(o,[{key:"_inputChanged",value:function(){this.error=!1}},{key:"_keyDown",value:function(e){13===e.keyCode&&(this._handleLogin(),e.preventDefault())}},{key:"_handleLogin",value:function(){var e=this;this.email?this._password||(this.error="Password is required."):this.error="Email is required.",this.error||(this._requestInProgress=!0,this.hass.callApi("post","cloud/login",{email:this.email,password:this._password}).then(function(o){e.fire("ha-account-refreshed",{account:o}),e.email="",e._password=""},function(o){if(e._password="",e._requestInProgress=!1,o&&o.body&&o.body.message){if("UserNotConfirmed"===o.body.code)return alert("You need to confirm your email before logging in."),void e.navigate("/config/cloud/register#confirm");"PasswordChangeRequired"===o.body.code&&(alert("You need to change your password before logging in."),e.navigate("/config/cloud/forgot-password")),e.error=o.body.message}else e.error="Unknown error"}))}},{key:"_handleRegister",value:function(){this.navigate("/config/cloud/register")}},{key:"_handleForgotPassword",value:function(){this.navigate("/config/cloud/forgot-password")}}],[{key:"is",get:function(){return"ha-config-cloud-login"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,email:{type:String,notify:!0},_password:{type:String,value:""},_requestInProgress:{type:Boolean,value:!1}}}},{key:"observers",get:function(){return["_inputChanged(email, _password)"]}}]),o}();customElements.define(HaConfigCloudLogin.is,HaConfigCloudLogin);</script><dom-module id="ha-config-cloud-register" assetpath="cloud/"><template><style include="iron-flex ha-style">paper-card{display:block;}paper-item{cursor:pointer;}paper-card:last-child{margin-top:24px;}h1{@apply (--paper-font-headline);margin:0;}.error{color:var(--google-red-500);}.card-actions{display:flex;justify-content:space-between;align-items:center;}[hidden]{display:none;}</style><hass-subpage title="Register Account"><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">Register with the Home Assistant Cloud</span> <span slot="introduction">Register today to easily connect your Home Assistant to cloud-only services.<p>By registering an account you agree to the following terms and conditions.</p><ul><li><a href="#">Terms and Conditions</a></li><li><a href="#">Privacy Policy</a></li></ul><p></p><p><i>Home Assistant will never share information with our cloud without your prior permission. </i></p></span><template is="dom-if" if="[[!_hasConfirmationCode]]"><paper-card><div class="card-content"><div class="header"><h1>Register</h1><div class="error" hidden$="[[!_error]]">[[_error]]</div></div><paper-input autofocus="" label="Email address" type="email" value="{{email}}" on-keydown="_keyDown"></paper-input><paper-input label="Password" value="{{_password}}" type="password" on-keydown="_keyDown"></paper-input></div><div class="card-actions"><ha-progress-button on-tap="_handleRegister" progress="[[_requestInProgress]]">Create Account</ha-progress-button><button class="link" hidden="[[_requestInProgress]]" on-click="_handleShowVerifyAccount">have confirmation code?</button></div></paper-card></template><template is="dom-if" if="[[_hasConfirmationCode]]"><paper-card><div class="card-content"><div class="header"><h1>Verify email</h1><div class="error" hidden$="[[!_error]]">[[_error]]</div></div><p>Check your email address, we've emailed you a verification code to activate your account.</p><template is="dom-if" if="[[_showEmailInputForConfirmation]]"><paper-input label="Email address" type="email" value="{{email}}" on-keydown="_keyDown"></paper-input></template><paper-input label="Confirmation code" value="{{_confirmationCode}}" on-keydown="_keyDown" type="number"></paper-input></div><div class="card-actions"><ha-progress-button on-tap="_handleVerifyEmail" progress="[[_requestInProgress]]">Verify Email</ha-progress-button></div></paper-card></template></ha-config-section></div></hass-subpage></template></dom-module><script>function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}var _createClass=function(){function e(e,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,r,t){return r&&e(o.prototype,r),t&&e(o,t),o}}(),HaConfigCloudRegister=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,window.hassMixins.NavigateMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(o,[{key:"_inputChanged",value:function(){this._error=!1}},{key:"_keyDown",value:function(e){13===e.keyCode&&(this._hasConfirmationCode?this._handleVerifyEmail():this._handleRegister(),e.preventDefault())}},{key:"_handleRegister",value:function(){var e=this;this.email?this._password||(this._error="Password is required."):this._error="Email is required.",this._error||(this._requestInProgress=!0,this.hass.callApi("post","cloud/register",{email:this.email,password:this._password}).then(function(){e._requestInProgress=!1,e._hasConfirmationCode=!0},function(o){e._password="",e._requestInProgress=!1,e._error=o&&o.body&&o.body.message?o.body.message:"Unknown error"}))}},{key:"_handleShowVerifyAccount",value:function(){this._error="",this._showEmailInputForConfirmation=!0,this._hasConfirmationCode=!0}},{key:"_handleVerifyEmail",value:function(){var e=this;this.email?this._confirmationCode||(this._error="Confirmation code is required."):this._error="Email is required.",this._error||(this._requestInProgress=!0,this.hass.callApi("post","cloud/confirm_register",{email:this.email,confirmation_code:this._confirmationCode}).then(function(){alert("Confirmation successful. You can now login."),e.navigate("config/cloud/login")},function(o){e._confirmationCode="",e._error=o&&o.body&&o.body.message?o.body.message:"Unknown error",e._requestInProgress=!1}))}}],[{key:"is",get:function(){return"ha-config-cloud-register"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,email:{type:String,notify:!0},_requestInProgress:{type:Boolean,value:!1},_password:{type:String,value:""},_showEmailInputForConfirmation:{type:Boolean,value:!1},_hasConfirmationCode:{type:Boolean,value:function(){return"#confirm"===document.location.hash}}}}},{key:"observers",get:function(){return["_inputChanged(email, _password)"]}}]),o}();customElements.define(HaConfigCloudRegister.is,HaConfigCloudRegister);</script><dom-module id="ha-config-cloud-forgot-password" assetpath="cloud/"><template><style include="iron-flex ha-style">.content{padding-bottom:24px;}paper-card{display:block;max-width:600px;margin:0 auto;margin-top:24px;}h1{@apply (--paper-font-headline);margin:0;}.error{color:var(--google-red-500);}.card-actions{display:flex;justify-content:space-between;align-items:center;}.card-actions a{color:var(--primary-text-color);}[hidden]{display:none;}</style><hass-subpage title="Forgot Password"><div class="content"><template is="dom-if" if="[[!_hasToken]]"><paper-card><div class="card-content"><h1>Forgot Password</h1><p>Enter your email address and we will send you a link to reset your password.</p><paper-input autofocus="" label="E-mail" value="{{email}}" type="email" on-keydown="_keyDown"></paper-input><div class="error" hidden$="[[!error]]">[[error]]</div></div><div class="card-actions"><ha-progress-button on-tap="_handleEmailPasswordReset" progress="[[_requestInProgress]]">Send reset email</ha-progress-button><button class="link" hidden="[[_requestInProgress]]" on-click="_handleHaveToken">have a token?</button></div></paper-card></template><template is="dom-if" if="[[_hasToken]]"><paper-card><div class="card-content"><h1>Confirm new password</h1><template is="dom-if" if="[[_showEmailInputForConfirmation]]"><paper-input label="E-mail" type="email" value="{{email}}" on-keydown="_keyDown"></paper-input></template><paper-input label="Confirmation code" value="{{_confirmationCode}}" on-keydown="_keyDown" type="number"></paper-input><paper-input label="New password" value="{{_newPassword}}" on-keydown="_keyDown" type="password"></paper-input><div class="error" hidden$="[[!error]]">[[error]]</div></div><div class="card-actions"><ha-progress-button on-tap="_handleConfirmPasswordReset" progress="[[_requestInProgress]]">Reset Password</ha-progress-button></div></paper-card></template></div></hass-subpage></template></dom-module><script>function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}var _createClass=function(){function e(e,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,r,t){return r&&e(o.prototype,r),t&&e(o,t),o}}(),HaConfigCloudForgotPassword=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,window.hassMixins.NavigateMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(o,[{key:"_inputChanged",value:function(){this.error=!1}},{key:"_keyDown",value:function(e){13===e.keyCode&&(this._hasToken?this._handleConfirmPasswordReset():this._handleEmailPasswordReset(),e.preventDefault())}},{key:"_handleEmailPasswordReset",value:function(){var e=this;this.email||(this.error="Email is required."),this.error||(this._requestInProgress=!0,this.hass.callApi("post","cloud/forgot_password",{email:this.email}).then(function(){e._hasToken=!0,e._requestInProgress=!1},function(o){e._requestInProgress=!1,e.error=o&&o.body&&o.body.message?o.body.message:"Unknown error"}))}},{key:"_handleHaveToken",value:function(){this._error="",this._showEmailInputForConfirmation=!0,this._hasToken=!0}},{key:"_handleConfirmPasswordReset",value:function(){var e=this;this.error="",this.email||(this.error+="Email is required. "),this._confirmationCode||(this.error+="Confirmation code is required. "),this._newPassword?this._newPassword.length<6&&(this.error+="New password should be at least 6 characters."):this.error+="New password is required. ",this.error||(this._requestInProgress=!0,this.hass.callApi("post","cloud/confirm_forgot_password",{email:this.email,confirmation_code:this._confirmationCode,new_password:this._newPassword}).then(function(){alert("Password reset successful! You can now login."),e.navigate("config/cloud/login")},function(o){e._requestInProgress=!1,e.error=o&&o.body&&o.body.message?o.body.message:"Unknown error"}))}}],[{key:"is",get:function(){return"ha-config-cloud-forgot-password"}},{key:"properties",get:function(){return{hass:Object,email:{type:String,notify:!0},_hasToken:{type:Boolean,value:!1},_newPassword:{type:String,value:""},_confirmationCode:{type:String,value:""},_showEmailInputForConfirmation:{type:Boolean,value:!1},_requestInProgress:{type:Boolean,value:!1}}}},{key:"observers",get:function(){return["_inputChanged(email, _newPassword)"]}}]),o}();customElements.define(HaConfigCloudForgotPassword.is,HaConfigCloudForgotPassword);</script><dom-module id="ha-config-cloud-account" assetpath="cloud/"><template><style include="iron-flex ha-style">.content{padding-bottom:24px;}paper-card{display:block;}.account{display:flex;padding:0 16px;}paper-button{align-self:center;}.soon{font-style:italic;margin-top:24px;text-align:center;}</style><hass-subpage title="Cloud Account"><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">Home Assistant Cloud</span> <span slot="introduction">The Home Assistant Cloud allows you to opt-in to functions that will bring your Home Assistant experience to the next level.<p><i>Home Assistant will never share information with our cloud without your prior permission. </i></p></span><paper-card><div class="account"><paper-item-body>[[account.email]]</paper-item-body><paper-button class="warning" on-tap="handleLogout">Sign out</paper-button></div></paper-card><div class="soon">More configuration options coming soon.</div></ha-config-section></div></hass-subpage></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigCloudAccount=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"handleLogout",value:function(){var e=this;this.hass.callApi("post","cloud/logout").then(function(){return e.fire("ha-account-refreshed",{account:null})})}}],[{key:"is",get:function(){return"ha-config-cloud-account"}},{key:"properties",get:function(){return{hass:Object,account:Object}}}]),t}();customElements.define(HaConfigCloudAccount.is,HaConfigCloudAccount);</script><dom-module id="ha-config-cloud" assetpath="cloud/"><template><style>iron-pages{height:100%;}</style><app-route route="[[route]]" pattern="/:page" data="{{_routeData}}" tail="{{_routeTail}}"></app-route><template is="dom-if" if="[[account]]" restamp=""><ha-config-cloud-account hass="[[hass]]" account="[[account]]" is-wide="[[isWide]]"></ha-config-cloud-account></template><template is="dom-if" if="[[!account]]" restamp=""><template is="dom-if" if="[[_isLoginPage(_routeData.page)]]" restamp=""><ha-config-cloud-login page-name="login" hass="[[hass]]" is-wide="[[isWide]]" email="{{_loginEmail}}"></ha-config-cloud-login></template><template is="dom-if" if="[[_isRegisterPage(_routeData.page)]]" restamp=""><ha-config-cloud-register page-name="register" hass="[[hass]]" is-wide="[[isWide]]" email="{{_loginEmail}}"></ha-config-cloud-register></template><template is="dom-if" if="[[_isForgotPasswordPage(_routeData.page)]]" restamp=""><ha-config-cloud-forgot-password page-name="forgot-password" hass="[[hass]]" is-wide="[[isWide]]" email="{{_loginEmail}}"></ha-config-cloud-forgot-password></template></template></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),HaConfigCloud=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.NavigateMixin(Polymer.Element)),_createClass(t,[{key:"_checkRoute",value:function(e,t){e&&"/config/cloud"===e.prefix&&(t||-1!==["/forgot-password","/register"].indexOf(e.path)?t&&-1!==["/login","/register","/forgot-password"].indexOf(e.path)&&this.navigate("/config/cloud/account",!0):this.navigate("/config/cloud/login",!0))}},{key:"_isRegisterPage",value:function(e){return"register"===e}},{key:"_isForgotPasswordPage",value:function(e){return"forgot-password"===e}},{key:"_isLoginPage",value:function(e){return"login"===e}}],[{key:"is",get:function(){return"ha-config-cloud"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,loadingAccount:{type:Boolean,value:!1},account:{type:Object,value:null},route:Object,_routeData:Object,_routeTail:Object,_loginEmail:String}}},{key:"observers",get:function(){return["_checkRoute(route, account)"]}}]),t}();customElements.define(HaConfigCloud.is,HaConfigCloud);</script><dom-module id="paper-fab" assetpath="../../bower_components/paper-fab/"><template strip-whitespace=""><style include="paper-material-styles">:host{@apply --layout-vertical;@apply --layout-center-center;background:var(--paper-fab-background, var(--accent-color));border-radius:50%;box-sizing:border-box;color:var(--text-primary-color);cursor:pointer;height:56px;min-width:0;outline:none;padding:16px;position:relative;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;width:56px;z-index:0;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;@apply --paper-fab;}[hidden]{display:none !important;}:host([mini]){width:40px;height:40px;padding:8px;@apply --paper-fab-mini;}:host([disabled]){color:var(--paper-fab-disabled-text, var(--paper-grey-500));background:var(--paper-fab-disabled-background, var(--paper-grey-300));@apply --paper-fab-disabled;}iron-icon{@apply --paper-fab-iron-icon;}span{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;@apply --paper-fab-label;}:host(.keyboard-focus){background:var(--paper-fab-keyboard-focus-background, var(--paper-pink-900));}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><iron-icon id="icon" hidden$="{{!_computeIsIconFab(icon, src)}}" src="[[src]]" icon="[[icon]]"></iron-icon><span hidden$="{{_computeIsIconFab(icon, src)}}">{{label}}</span></template><script>Polymer({is:"paper-fab",behaviors:[Polymer.PaperButtonBehavior],properties:{src:{type:String,value:""},icon:{type:String,value:""},mini:{type:Boolean,value:!1,reflectToAttribute:!0},label:{type:String,observer:"_labelChanged"}},_labelChanged:function(){this.setAttribute("aria-label",this.label)},_computeIsIconFab:function(e,t){return e.length>0||t.length>0}});</script></dom-module><dom-module id="ha-automation-picker" assetpath="automation/"><template><style include="ha-style">:host{display:block;}paper-item{cursor:pointer;}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;}paper-fab[is-wide]{bottom:24px;right:24px;}a{color:var(--primary-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Automations</div></app-toolbar></app-header><ha-config-section is-wide="[[isWide]]"><div slot="header">Automation editor</div><div slot="introduction">The automation editor allows you to create and edit automations. Please read <a href="https://home-assistant.io/docs/automation/editor/" target="_blank">the instructions</a> to make sure that you have configured Home Assistant correctly.</div><paper-card heading="Pick automation to edit"><template is="dom-if" if="[[!automations.length]]"><div class="card-content"><p>We couldn't find any editable automations.</p></div></template><template is="dom-repeat" items="[[automations]]" as="automation"><paper-item><paper-item-body two-line="" on-tap="automationTapped"><div>[[computeName(automation)]]</div><div secondary="">[[computeDescription(automation)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></paper-card></ha-config-section><paper-fab is-wide$="[[isWide]]" icon="mdi:plus" title="Add Automation" on-tap="addAutomation"></paper-fab></app-header-layout></template></dom-module><script>Polymer({is:"ha-automation-picker",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},automations:{type:Array},isWide:{type:Boolean}},automationTapped:function(t){history.pushState(null,null,"/config/automation/edit/"+this.automations[t.model.index].attributes.id),this.fire("location-changed")},addAutomation:function(){history.pushState(null,null,"/config/automation/new"),this.fire("location-changed")},computeName:function(t){return window.hassUtil.computeStateName(t)},computeDescription:function(t){return""},_backTapped:function(){history.back()}});</script><dom-module id="paper-radio-button" assetpath="../../bower_components/paper-radio-button/"><template strip-whitespace=""><style>:host{display:inline-block;line-height:0;white-space:nowrap;cursor:pointer;@apply --paper-font-common-base;--calculated-paper-radio-button-size:var(--paper-radio-button-size, 16px);--calculated-paper-radio-button-ink-size:var(--paper-radio-button-ink-size, -1px);}:host(:focus){outline:none;}#radioContainer{@apply --layout-inline;@apply --layout-center-center;position:relative;width:var(--calculated-paper-radio-button-size);height:var(--calculated-paper-radio-button-size);vertical-align:middle;@apply --paper-radio-button-radio-container;}#ink{position:absolute;top:50%;left:50%;right:auto;width:var(--calculated-paper-radio-button-ink-size);height:var(--calculated-paper-radio-button-ink-size);color:var(--paper-radio-button-unchecked-ink-color, var(--primary-text-color));opacity:0.6;pointer-events:none;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);}#ink[checked]{color:var(--paper-radio-button-checked-ink-color, var(--primary-color));}#offRadio, #onRadio{position:absolute;box-sizing:border-box;top:0;left:0;width:100%;height:100%;border-radius:50%;}#offRadio{border:2px solid var(--paper-radio-button-unchecked-color, var(--primary-text-color));background-color:var(--paper-radio-button-unchecked-background-color, transparent);transition:border-color 0.28s;}#onRadio{background-color:var(--paper-radio-button-checked-color, var(--primary-color));-webkit-transform:scale(0);transform:scale(0);transition:-webkit-transform ease 0.28s;transition:transform ease 0.28s;will-change:transform;}:host([checked]) #offRadio{border-color:var(--paper-radio-button-checked-color, var(--primary-color));}:host([checked]) #onRadio{-webkit-transform:scale(0.5);transform:scale(0.5);}#radioLabel{line-height:normal;position:relative;display:inline-block;vertical-align:middle;margin-left:var(--paper-radio-button-label-spacing, 10px);white-space:normal;color:var(--paper-radio-button-label-color, var(--primary-text-color));@apply --paper-radio-button-label;}:host([checked]) #radioLabel{@apply --paper-radio-button-label-checked;}:host-context([dir="rtl"]) #radioLabel{margin-left:0;margin-right:var(--paper-radio-button-label-spacing, 10px);}#radioLabel[hidden]{display:none;}:host([disabled]) #offRadio{border-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled][checked]) #onRadio{background-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled]) #radioLabel{opacity:0.65;}</style><div id="radioContainer"><div id="offRadio"></div><div id="onRadio"></div></div><div id="radioLabel"><slot></slot></div></template><script>Polymer({is:"paper-radio-button",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"radio","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},ready:function(){this._rippleContainer=this.$.radioContainer},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){if("-1px"===this.getComputedStyleValue("--calculated-paper-radio-button-ink-size").trim()){var e=parseFloat(this.getComputedStyleValue("--calculated-paper-radio-button-size").trim()),t=Math.floor(3*e);t%2!=e%2&&t++,this.updateStyles({"--paper-radio-button-ink-size":t+"px"})}})}});</script></dom-module><dom-module id="paper-radio-group" assetpath="../../bower_components/paper-radio-group/"><template><style>:host{display:inline-block;}:host ::slotted(*){padding:var(--paper-radio-group-item-padding, 12px);}</style><slot></slot></template></dom-module><script>Polymer({is:"paper-radio-group",behaviors:[Polymer.IronMenubarBehavior],hostAttributes:{role:"radiogroup",tabindex:0},properties:{attrForSelected:{type:String,value:"name"},selectedAttribute:{type:String,value:"checked"},selectable:{type:String,value:"paper-radio-button"},allowEmptySelection:{type:Boolean,value:!1}},select:function(e){var t=this._valueToItem(e);if(!t||!t.hasAttribute("disabled")){if(this.selected){var i=this._valueToItem(this.selected);if(this.selected==e){if(!this.allowEmptySelection)return void(i&&(i.checked=!0));e=""}i&&(i.checked=!1)}Polymer.IronSelectableBehavior.select.apply(this,[e]),this.fire("paper-radio-group-changed")}},_activateFocusedItem:function(){this._itemActivate(this._valueForItem(this.focusedItem),this.focusedItem)},_onUpKey:function(e){this._focusPrevious(),e.preventDefault(),this._activateFocusedItem()},_onDownKey:function(e){this._focusNext(),e.preventDefault(),this._activateFocusedItem()},_onLeftKey:function(e){Polymer.IronMenubarBehaviorImpl._onLeftKey.apply(this,arguments),this._activateFocusedItem()},_onRightKey:function(e){Polymer.IronMenubarBehaviorImpl._onRightKey.apply(this,arguments),this._activateFocusedItem()}});</script><script>var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function e(){}function t(t,n){var o,r,a,i,l=M;for(i=arguments.length;i-- >2;)V.push(arguments[i]);for(n&&null!=n.children&&(V.length||V.push(n.children),delete n.children);V.length;)if((r=V.pop())&&void 0!==r.pop)for(i=r.length;i--;)V.push(r[i]);else"boolean"==typeof r&&(r=null),(a="function"!=typeof t)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(a=!1)),a&&o?l[l.length-1]+=r:l===M?l=[r]:l.push(r),o=a;var u=new e;return u.nodeName=t,u.children=l,u.attributes=null==n?void 0:n,u.key=null==n?void 0:n.key,void 0!==B.vnode&&B.vnode(u),u}function n(e,t){for(var n in t)e[n]=t[n];return e}function o(e){!e._dirty&&(e._dirty=!0)&&1==H.push(e)&&(B.debounceRendering||W)(r)}function r(){var e,t=H;for(H=[];e=t.pop();)e._dirty&&w(e)}function a(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&i(e,t.nodeName):n||e._componentConstructor===t.nodeName}function i(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function l(e){var t=n({},e.attributes);t.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===t[r]&&(t[r]=o[r]);return t}function u(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e,t,n,o,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),o&&o(e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"===(void 0===o?"undefined":D(o))){if("string"!=typeof n)for(var a in n)a in o||(e.style[a]="");for(var a in o)e.style[a]="number"==typeof o[a]&&!1===I.test(a)?o[a]+"px":o[a]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var i=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,c,i):e.removeEventListener(t,c,i),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e)d(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t);else{var l=r&&t!==(t=t.replace(/^xlink\:?/,""));null==o||!1===o?l?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(l?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function d(e,t,n){try{e[t]=n}catch(e){}}function c(e){return this._listeners[e.type](B.event&&B.event(e)||e)}function h(){for(var e;e=J.pop();)B.afterMount&&B.afterMount(e),e.componentDidMount&&e.componentDidMount()}function f(e,t,n,o,r,a){K++||(R=null!=r&&void 0!==r.ownerSVGElement,F=null!=e&&!("__preactattr_"in e));var i=g(e,t,n,o,a);return r&&i.parentNode!==r&&r.appendChild(i),--K||(F=!1,a||h()),i}function g(e,t,n,o,r){var a=e,l=R;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(a=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(a,e),b(e,!0))),a.__preactattr_=!0,a;var p=t.nodeName;if("function"==typeof p)return x(e,t,n,o);if(R="svg"===p||"foreignObject"!==p&&R,p=String(p),(!e||!i(e,p))&&(a=u(p,R),e)){for(;e.firstChild;)a.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(a,e),b(e,!0)}var s=a.firstChild,d=a.__preactattr_,c=t.children;if(null==d){d=a.__preactattr_={};for(var h=a.attributes,f=h.length;f--;)d[h[f].name]=h[f].value}return!F&&c&&1===c.length&&"string"==typeof c[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=c[0]&&(s.nodeValue=c[0]):(c&&c.length||null!=s)&&v(a,c,n,o,F||null!=d.dangerouslySetInnerHTML),y(a,t.attributes,d),R=l,a}function v(e,t,n,o,r){var i,l,u,s,d,c=e.childNodes,h=[],f={},v=0,_=0,y=c.length,m=0,C=t?t.length:0;if(0!==y)for(x=0;x<y;x++){var k=c[x],O=k.__preactattr_;null!=(w=C&&O?k._component?k._component.__key:O.key:null)?(v++,f[w]=k):(O||(void 0!==k.splitText?!r||k.nodeValue.trim():r))&&(h[m++]=k)}if(0!==C)for(x=0;x<C;x++){d=null;var w=(s=t[x]).key;if(null!=w)v&&void 0!==f[w]&&(d=f[w],f[w]=void 0,v--);else if(!d&&_<m)for(i=_;i<m;i++)if(void 0!==h[i]&&a(l=h[i],s,r)){d=l,h[i]=void 0,i===m-1&&m--,i===_&&_++;break}d=g(d,s,n,o),u=c[x],d&&d!==e&&d!==u&&(null==u?e.appendChild(d):d===u.nextSibling?p(u):e.insertBefore(d,u))}if(v)for(var x in f)void 0!==f[x]&&b(f[x],!1);for(;_<=m;)void 0!==(d=h[m--])&&b(d,!1)}function b(e,t){var n=e._component;n?P(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||p(e),_(e))}function _(e){for(e=e.lastChild;e;){var t=e.previousSibling;b(e,!0),e=t}}function y(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||s(e,o,n[o],n[o]=void 0,R);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||s(e,o,n[o],n[o]=t[o],R)}function m(e){var t=e.constructor.name;(Z[t]||(Z[t]=[])).push(e)}function C(e,t,n){var o,r=Z[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),S.call(o,t,n)):((o=new S(t,n)).constructor=e,o.render=k),r)for(var a=r.length;a--;)if(r[a].constructor===e){o.nextBase=r[a].nextBase,r.splice(a,1);break}return o}function k(e,t,n){return this.constructor(e,n)}function O(e,t,n,r,a){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===B.syncComponentUpdates&&e.base?o(e):w(e,1,a)),e.__ref&&e.__ref(e))}function w(e,t,o,r){if(!e._disable){var a,i,u,p=e.props,s=e.state,d=e.context,c=e.prevProps||p,g=e.prevState||s,v=e.prevContext||d,_=e.base,y=e.nextBase,m=_||y,k=e._component,x=!1;if(_&&(e.props=c,e.state=g,e.context=v,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(p,s,d)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(p,s,d),e.props=p,e.state=s,e.context=d),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!x){a=e.render(p,s,d),e.getChildContext&&(d=n(n({},d),e.getChildContext()));var S,j,T=a&&a.nodeName;if("function"==typeof T){var N=l(a);(i=k)&&i.constructor===T&&N.key==i.__key?O(i,N,1,d,!1):(S=i,e._component=i=C(T,N,d),i.nextBase=i.nextBase||y,i._parentComponent=e,O(i,N,0,d,!1),w(i,1,o,!0)),j=i.base}else u=m,(S=k)&&(u=e._component=null),(m||1===t)&&(u&&(u._component=null),j=f(u,a,d,o||!_,m&&m.parentNode,!0));if(m&&j!==m&&i!==k){var D=m.parentNode;D&&j!==D&&(D.replaceChild(j,m),S||(m._component=null,b(m,!1)))}if(S&&P(S),e.base=j,j&&!r){for(var A=e,E=e;E=E._parentComponent;)(A=E).base=j;j._component=A,j._componentConstructor=A.constructor}}if(!_||o?J.unshift(e):x||(e.componentDidUpdate&&e.componentDidUpdate(c,g,v),B.afterUpdate&&B.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);K||r||h()}}function x(e,t,n,o){for(var r=e&&e._component,a=r,i=e,u=r&&e._componentConstructor===t.nodeName,p=u,s=l(t);r&&!p&&(r=r._parentComponent);)p=r.constructor===t.nodeName;return r&&p&&(!o||r._component)?(O(r,s,3,n,o),e=r.base):(a&&!u&&(P(a),e=i=null),r=C(t.nodeName,s,n),e&&!r.nextBase&&(r.nextBase=e,i=null),O(r,s,1,n,o),e=r.base,i&&e!==i&&(i._component=null,b(i,!1))),e}function P(e){B.beforeUnmount&&B.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?P(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,p(t),m(e),_(t)),e.__ref&&e.__ref(null)}function S(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function j(e,t,n){return f(n,e,{},!1,t,!1)}function T(e,t){var n=U({},this.props[e]);t.target.value!==n[t.target.name]&&(t.target.value?n[t.target.name]=t.target.value:delete n[t.target.name],this.props.onChange(this.props.index,n))}function N(e){for(var t=Object.keys(Pe),n=0;n<t.length;n++)if(Pe[t[n]].configKey in e)return t[n];return null}var D="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof(e)},A=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),L=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},z=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},G=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t},B={},V=[],M=[],W="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,I=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,H=[],J=[],K=0,R=!1,F=!1,Z={};n(S.prototype,{setState:function(e,t){var r=this.state;this.prevState||(this.prevState=n({},r)),n(r,"function"==typeof e?e(r,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),o(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),w(this,2)},render:function(){}});var $=function(e){function n(e){A(this,n);var t=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state.isValid=!0,t.state.value=JSON.stringify(e.value||{},null,2),t.onChange=t.onChange.bind(t),t}return z(n,S),E(n,[{key:"onChange",value:function(e){var t=e.target.value,n=void 0,o=void 0;try{n=JSON.parse(t),o=!0}catch(e){o=!1}this.setState({value:t,isValid:o}),o&&this.props.onChange(n)}},{key:"componentWillReceiveProps",value:function(e){var t=e.value;this.setState({value:JSON.stringify(t,null,2),isValid:!0})}},{key:"render",value:function(e,n){var o=e.label,r=n.value,a={minWidth:300,width:"100%"};return n.isValid||(a.border="1px solid red"),t("paper-textarea",{label:o,value:r,style:a,"onvalue-changed":this.onChange})}}]),n}(),q=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"trigger"),e.eventDataChanged=e.eventDataChanged.bind(e),e}return z(n,S),E(n,[{key:"eventDataChanged",value:function(e){this.props.onChange(this.props.index,U({},this.props.trigger,{event_data:e}))}},{key:"render",value:function(e){var n=e.trigger,o=n.event_type,r=n.event_data;return t("div",null,t("paper-input",{label:"Event Type",name:"event_type",value:o,onChange:this.onChange}),t($,{label:"Event Data",value:r,onChange:this.eventDataChanged}))}}]),n}();q.defaultConfig={event_type:"",event_data:{}};var Q=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.radioGroupPicked=e.radioGroupPicked.bind(e),e}return z(n,S),E(n,[{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,U({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(e){var n=e.trigger.event;return t("div",null,t("label",{id:"eventlabel"},"Event:"),t("paper-radio-group",{selected:n,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},t("paper-radio-button",{name:"start"},"Start"),t("paper-radio-button",{name:"shutdown"},"Shutdown")))}}]),n}();Q.defaultConfig={event:"start"};var X=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"trigger"),e}return z(n,S),E(n,[{key:"render",value:function(e){var n=e.trigger,o=n.topic,r=n.payload;return t("div",null,t("paper-input",{label:"Topic",name:"topic",value:o,onChange:this.onChange}),t("paper-input",{label:"Payload (Optional)",name:"payload",value:r,onChange:this.onChange}))}}]),n}();X.defaultConfig={topic:""};var Y=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"trigger"),e}return z(n,S),E(n,[{key:"render",value:function(e){var n=e.trigger,o=n.value_template,r=n.entity_id,a=n.below,i=n.above;return t("div",null,t("paper-input",{label:"Entity Id",name:"entity_id",value:r,onChange:this.onChange}),t("paper-input",{label:"Above",name:"above",value:i,onChange:this.onChange}),t("paper-input",{label:"Below",name:"below",value:a,onChange:this.onChange}),t("paper-textarea",{label:"Value template (optional)",name:"value_template",value:o,"onvalue-changed":this.onChange}))}}]),n}();Y.defaultConfig={entity_id:""};var ee=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"trigger"),e}return z(n,S),E(n,[{key:"render",value:function(e){var n=e.trigger,o=n.entity_id,r=n.to,a=n.from,i=n.for;return t("div",null,t("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),t("paper-input",{label:"From",name:"from",value:a,onChange:this.onChange}),t("paper-input",{label:"To",name:"to",value:r,onChange:this.onChange}),i&&t("pre",null,"For: ",JSON.stringify(i,null,2)))}}]),n}();ee.defaultConfig={entity_id:""};var te=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"trigger"),e.radioGroupPicked=e.radioGroupPicked.bind(e),e}return z(n,S),E(n,[{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,U({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(e){var n=e.trigger,o=n.offset,r=n.event;return t("div",null,t("label",{id:"eventlabel"},"Event:"),t("paper-radio-group",{selected:r,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},t("paper-radio-button",{name:"sunrise"},"Sunrise"),t("paper-radio-button",{name:"sunset"},"Sunset")),t("paper-input",{label:"Offset (optional)",name:"offset",value:o,onChange:this.onChange}))}}]),n}();te.defaultConfig={event:"sunrise"};var ne=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"trigger"),e}return z(n,S),E(n,[{key:"render",value:function(e){return t("div",null,t("paper-textarea",{label:"Value Template",name:"value_template",value:e.trigger.value_template,"onvalue-changed":this.onChange}))}}]),n}();ne.defaultConfig={value_template:""};var oe=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"trigger"),e}return z(n,S),E(n,[{key:"render",value:function(e){return t("div",null,t("paper-input",{label:"At",name:"at",value:e.trigger.at,onChange:this.onChange}))}}]),n}();oe.defaultConfig={at:""};var re=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"trigger"),e.radioGroupPicked=e.radioGroupPicked.bind(e),e}return z(n,S),E(n,[{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,U({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(e){var n=e.trigger,o=n.entity_id,r=n.zone,a=n.event;return t("div",null,t("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),t("paper-input",{label:"Zone",name:"zone",value:r,onChange:this.onChange}),t("label",{id:"eventlabel"},"Event:"),t("paper-radio-group",{selected:a,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},t("paper-radio-button",{name:"enter"},"Enter"),t("paper-radio-button",{name:"leave"},"Leave")))}}]),n}();re.defaultConfig={entity_id:"",zone:"",event:"enter"};var ae={event:q,state:ee,homeassistant:Q,mqtt:X,numeric_state:Y,sun:te,template:ne,time:oe,zone:re},ie=Object.keys(ae).sort(),le=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return z(n,S),E(n,[{key:"typeChanged",value:function(e){var t=e.target.selectedItem.innerHTML;t!==this.props.trigger.platform&&this.props.onChange(this.props.index,U({platform:t},ae[t].defaultConfig))}},{key:"render",value:function(e){var n=e.index,o=e.trigger,r=e.onChange,a=ae[o.platform],i=ie.indexOf(o.platform);return a?t("div",null,t("paper-dropdown-menu-light",{label:"Trigger Type","no-animations":!0},t("paper-listbox",{slot:"dropdown-content",selected:i,"oniron-select":this.typeChanged},ie.map(function(e){return t("paper-item",null,e)}))),t(a,{index:n,trigger:o,onChange:r})):t("div",null,"Unsupported platform: ",o.platform,t("pre",null,JSON.stringify(o,null,2)))}}]),n}(),ue=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onDelete=e.onDelete.bind(e),e}return z(n,S),E(n,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){return t("paper-card",null,t("div",{class:"card-menu"},t("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},t("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),t("paper-listbox",{slot:"dropdown-content"},t("paper-item",{disabled:!0},"Duplicate"),t("paper-item",{onTap:this.onDelete},"Delete")))),t("div",{class:"card-content"},t(le,e)))}}]),n}(),pe=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.addTrigger=e.addTrigger.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e}return z(n,S),E(n,[{key:"addTrigger",value:function(){var e=this.props.trigger.concat(U({platform:"state"},ee.defaultConfig));this.props.onChange(e)}},{key:"triggerChanged",value:function(e,t){var n=this.props.trigger.concat();null===t?n.splice(e,1):n[e]=t,this.props.onChange(n)}},{key:"render",value:function(e){var n=this;return t("div",{class:"triggers"},e.trigger.map(function(e,o){return t(ue,{index:o,trigger:e,onChange:n.triggerChanged})}),t("paper-card",null,t("div",{class:"card-actions add-card"},t("paper-button",{onTap:this.addTrigger},"Add trigger"))))}}]),n}(),se=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"condition"),e}return z(n,S),E(n,[{key:"render",value:function(e){var n=e.condition,o=n.value_template,r=n.entity_id,a=n.below,i=n.above;return t("div",null,t("paper-input",{label:"Entity Id",name:"entity_id",value:r,onChange:this.onChange}),t("paper-input",{label:"Above",name:"above",value:i,onChange:this.onChange}),t("paper-input",{label:"Below",name:"below",value:a,onChange:this.onChange}),t("paper-textarea",{label:"Value template (optional)",name:"value_template",value:o,"onvalue-changed":this.onChange}))}}]),n}();se.defaultConfig={entity_id:""};var de=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"condition"),e}return z(n,S),E(n,[{key:"render",value:function(e){var n=e.condition,o=n.entity_id,r=n.state,a=n.for;return t("div",null,t("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),t("paper-input",{label:"State",name:"state",value:r,onChange:this.onChange}),a&&t("pre",null,"For: ",JSON.stringify(a,null,2)))}}]),n}();de.defaultConfig={entity_id:"",state:""};var ce=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"condition"),e.afterPicked=e.radioGroupPicked.bind(e,"after"),e.beforePicked=e.radioGroupPicked.bind(e,"before"),e}return z(n,S),E(n,[{key:"radioGroupPicked",value:function(e,t){var n=U({},this.props.condition);t.target.selected?n[e]=t.target.selected:delete n[e],this.props.onChange(this.props.index,n)}},{key:"render",value:function(e){var n=e.condition,o=n.after,r=n.after_offset,a=n.before,i=n.before_offset;return t("div",null,t("label",{id:"beforelabel"},"Before:"),t("paper-radio-group",{"allow-empty-selection":!0,selected:a,"aria-labelledby":"beforelabel","onpaper-radio-group-changed":this.beforePicked},t("paper-radio-button",{name:"sunrise"},"Sunrise"),t("paper-radio-button",{name:"sunset"},"Sunset")),t("paper-input",{label:"Before offset (optional)",name:"before_offset",value:i,onChange:this.onChange,disabled:void 0===a}),t("label",{id:"afterlabel"},"After:"),t("paper-radio-group",{"allow-empty-selection":!0,selected:o,"aria-labelledby":"afterlabel","onpaper-radio-group-changed":this.afterPicked},t("paper-radio-button",{name:"sunrise"},"Sunrise"),t("paper-radio-button",{name:"sunset"},"Sunset")),t("paper-input",{label:"After offset (optional)",name:"after_offset",value:r,onChange:this.onChange,disabled:void 0===o}))}}]),n}();ce.defaultConfig={};var he=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"condition"),e}return z(n,S),E(n,[{key:"render",value:function(e){return t("div",null,t("paper-textarea",{label:"Value Template",name:"value_template",value:e.condition.value_template,"onvalue-changed":this.onChange}))}}]),n}();he.defaultConfig={value_template:""};var fe=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"condition"),e}return z(n,S),E(n,[{key:"render",value:function(e){var n=e.condition,o=n.after,r=n.before;return t("div",null,t("paper-input",{label:"After",name:"after",value:o,onChange:this.onChange}),t("paper-input",{label:"Before",name:"before",value:r,onChange:this.onChange}))}}]),n}();fe.defaultConfig={};var ge=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"condition"),e}return z(n,S),E(n,[{key:"render",value:function(e){var n=e.condition,o=n.entity_id,r=n.zone;return t("div",null,t("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),t("paper-input",{label:"Zone entity id",name:"zone",value:r,onChange:this.onChange}))}}]),n}();ge.defaultConfig={entity_id:"",zone:""};var ve={state:de,numeric_state:se,sun:ce,template:he,time:fe,zone:ge},be=Object.keys(ve).sort(),_e=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return z(n,S),E(n,[{key:"typeChanged",value:function(e){var t=e.target.selectedItem.innerHTML;t!==this.props.condition.condition&&this.props.onChange(this.props.index,U({condition:t},ve[t].defaultConfig))}},{key:"render",value:function(e){var n=e.index,o=e.condition,r=e.onChange,a=ve[o.condition],i=be.indexOf(o.condition);return a?t("div",null,t("paper-dropdown-menu-light",{label:"Condition Type","no-animations":!0},t("paper-listbox",{slot:"dropdown-content",selected:i,"oniron-select":this.typeChanged},be.map(function(e){return t("paper-item",null,e)}))),t(a,{index:n,condition:o,onChange:r})):t("div",null,"Unsupported condition: ",o.condition,t("pre",null,JSON.stringify(o,null,2)))}}]),n}(),ye=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onDelete=e.onDelete.bind(e),e}return z(n,S),E(n,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){return t("paper-card",null,t("div",{class:"card-menu"},t("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},t("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),t("paper-listbox",{slot:"dropdown-content"},t("paper-item",{disabled:!0},"Duplicate"),t("paper-item",{onTap:this.onDelete},"Delete")))),t("div",{class:"card-content"},t(_e,e)))}}]),n}(),me=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.addCondition=e.addCondition.bind(e),e.conditionChanged=e.conditionChanged.bind(e),e}return z(n,S),E(n,[{key:"addCondition",value:function(){var e=this.props.condition.concat({condition:"state"});this.props.onChange(e)}},{key:"conditionChanged",value:function(e,t){var n=this.props.condition.concat();null===t?n.splice(e,1):n[e]=t,this.props.onChange(n)}},{key:"render",value:function(e){var n=this;return t("div",{class:"triggers"},e.condition.map(function(e,o){return t(ye,{index:o,condition:e,onChange:n.conditionChanged})}),t("paper-card",null,t("div",{class:"card-actions add-card"},t("paper-button",{onTap:this.addCondition},"Add condition"))))}}]),n}(),Ce=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return z(n,S),E(n,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,U({},this.props.action,{data:e}))}},{key:"render",value:function(e){var n=e.action,o=n.alias,r=n.service,a=n.data;return t("div",null,t("paper-input",{label:"Alias",name:"alias",value:o,onChange:this.onChange}),t("paper-input",{label:"Service",name:"service",value:r,onChange:this.onChange}),t($,{label:"Service Data",value:a,onChange:this.serviceDataChanged}))}}]),n}();Ce.configKey="service",Ce.defaultConfig={alias:"",service:"",data:{}};var ke=function(e){function n(){return A(this,n),G(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return z(n,S),E(n,[{key:"render",value:function(e){var n=e.action,o=e.index,r=e.onChange;return t(_e,{condition:n,onChange:r,index:o})}}]),n}();ke.configKey="condition",ke.defaultConfig=U({condition:"state"},de.defaultConfig);var Oe=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"action"),e}return z(n,S),E(n,[{key:"render",value:function(e){return t("div",null,t("paper-input",{label:"Delay",name:"delay",value:e.action.delay,onChange:this.onChange}))}}]),n}();Oe.configKey="delay",Oe.defaultConfig={delay:""};var we=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return z(n,S),E(n,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,U({},this.props.action,{data:e}))}},{key:"render",value:function(e){var n=e.action,o=n.event,r=n.event_data;return t("div",null,t("paper-input",{label:"Event",name:"event",value:o,onChange:this.onChange}),t($,{label:"Service Data",value:r,onChange:this.serviceDataChanged}))}}]),n}();we.configKey="event",we.defaultConfig={event:"",event_data:{}};var xe=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=T.bind(e,"action"),e.onTemplateChange=e.onTemplateChange.bind(e),e}return z(n,S),E(n,[{key:"onTemplateChange",value:function(e){this.props.onChange(this.props.index,U({},this.props.trigger,L({},e.target.name,e.target.value)))}},{key:"render",value:function(e){var n=e.action,o=n.wait_template,r=n.timeout;return t("div",null,t("paper-textarea",{label:"Wait Template",name:"wait_template",value:o,"onvalue-changed":this.onTemplateChange}),t("paper-input",{label:"Timeout (Optional)",name:"timeout",value:r,onChange:this.onChange}))}}]),n}();xe.configKey="wait_template",xe.defaultConfig={wait_template:"",timeout:""};var Pe={"Call Service":Ce,Delay:Oe,Wait:xe,Condition:ke,"Fire Event":we},Se=Object.keys(Pe).sort(),je=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return z(n,S),E(n,[{key:"typeChanged",value:function(e){var t=e.target.selectedItem.innerHTML;N(this.props.action)!==t&&this.props.onChange(this.props.index,Pe[t].defaultConfig)}},{key:"render",value:function(e){var n=e.index,o=e.action,r=e.onChange,a=N(o),i=a&&Pe[a],l=Se.indexOf(a);return i?t("div",null,t("paper-dropdown-menu-light",{label:"Action Type","no-animations":!0},t("paper-listbox",{slot:"dropdown-content",selected:l,"oniron-select":this.typeChanged},Se.map(function(e){return t("paper-item",null,e)}))),t(i,{index:n,action:o,onChange:r})):t("div",null,"Unsupported action",t("pre",null,JSON.stringify(o,null,2)))}}]),n}(),Te=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onDelete=e.onDelete.bind(e),e}return z(n,S),E(n,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){return t("paper-card",null,t("div",{class:"card-menu"},t("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},t("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),t("paper-listbox",{slot:"dropdown-content"},t("paper-item",{disabled:!0},"Duplicate"),t("paper-item",{onTap:this.onDelete},"Delete")))),t("div",{class:"card-content"},t(je,e)))}}]),n}(),Ne=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.addAction=e.addAction.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return z(n,S),E(n,[{key:"addAction",value:function(){var e=this.props.script.concat({service:""});this.props.onChange(e)}},{key:"actionChanged",value:function(e,t){var n=this.props.script.concat();null===t?n.splice(e,1):n[e]=t,this.props.onChange(n)}},{key:"render",value:function(e){var n=this;return t("div",{class:"script"},e.script.map(function(e,o){return t(Te,{index:o,action:e,onChange:n.actionChanged})}),t("paper-card",null,t("div",{class:"card-actions add-card"},t("paper-button",{onTap:this.addAction},"Add action"))))}}]),n}(),De=function(e){function n(){A(this,n);var e=G(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=e.onChange.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e.conditionChanged=e.conditionChanged.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return z(n,S),E(n,[{key:"onChange",value:function(e){this.props.onChange(U({},this.props.automation,L({},e.target.name,e.target.value)))}},{key:"triggerChanged",value:function(e){this.props.onChange(U({},this.props.automation,{trigger:e}))}},{key:"conditionChanged",value:function(e){this.props.onChange(U({},this.props.automation,{condition:e}))}},{key:"actionChanged",value:function(e){this.props.onChange(U({},this.props.automation,{action:e}))}},{key:"render",value:function(e){var n=e.automation,o=e.isWide,r=n.alias,a=n.trigger,i=n.condition,l=n.action;return t("div",null,t("ha-config-section",{"is-wide":o},t("span",{slot:"header"},r),t("span",{slot:"introduction"},"Use automations to bring your home alive."),t("paper-card",null,t("div",{class:"card-content"},t("paper-input",{label:"Name",name:"alias",value:r,onChange:this.onChange})))),t("ha-config-section",{"is-wide":o},t("span",{slot:"header"},"Triggers"),t("span",{slot:"introduction"},"Triggers are what starts the processing of an automation rule. It is possible to specify multiple triggers for the same rule. Once a trigger starts, Home Assistant will validate the conditions, if any, and call the action.",t("p",null,t("a",{href:"https://home-assistant.io/docs/automation/trigger/",target:"_blank"},"Learn more about triggers."))),t(pe,{trigger:a,onChange:this.triggerChanged})),t("ha-config-section",{"is-wide":o},t("span",{slot:"header"},"Conditions"),t("span",{slot:"introduction"},"Conditions are an optional part of an automation rule and can be used to prevent an action from happening when triggered. Conditions look very similar to triggers but are very different. A trigger will look at events happening in the system while a condition only looks at how the system looks right now. A trigger can observe that a switch is being turned on. A condition can only see if a switch is currently on or off.",t("p",null,t("a",{href:"https://home-assistant.io/docs/scripts/conditions/",target:"_blank"},"Learn more about conditions."))),t(me,{condition:i||[],onChange:this.conditionChanged})),t("ha-config-section",{"is-wide":o},t("span",{slot:"header"},"Action"),t("span",{slot:"introduction"},"The actions are what Home Assistant will do when the automation is triggered.",t("p",null,t("a",{href:"https://home-assistant.io/docs/scripts/",target:"_blank"},"Learn more about actions."))),t(Ne,{script:l,onChange:this.actionChanged})))}}]),n}();window.AutomationEditor=function(e,n,o){return j(t(De,n),e,o)},window.unmountPreact=function(e,t){j(function(){return null},e,t)}}();</script><dom-module id="ha-automation-editor" assetpath="automation/"><template><style include="ha-style">.errors{padding:20px;font-weight:bold;color:var(--google-red-500);}.content{padding-bottom:20px;}paper-card{display:block;}.triggers,
      .script{margin-top:-16px;}.triggers paper-card,
      .script paper-card{margin-top:16px;}.add-card paper-button{display:block;text-align:center;}.card-menu{position:absolute;top:0;right:0;z-index:1;color:var(--primary-text-color);}.card-menu paper-item{cursor:pointer;}span[slot=introduction] a{color:var(--primary-color);}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;margin-bottom:-80px;transition:margin-bottom .3s;}paper-fab[is-wide]{bottom:24px;right:24px;}paper-fab[dirty]{margin-bottom:0;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="backTapped"></paper-icon-button><div main-title="">Automation [[name]]</div></app-toolbar></app-header><div class="content"><template is="dom-if" if="[[errors]]"><div class="errors">[[errors]]</div></template><div id="root"></div><paper-fab is-wide$="[[isWide]]" dirty$="[[dirty]]" icon="mdi:content-save" title="Save" on-tap="saveAutomation"></paper-fab></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-automation-editor",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},errors:{type:Object,value:null},dirty:{type:Boolean,value:!1},config:{type:Object,value:null},automation:{type:Object,observer:"automationChanged"},creatingNew:{type:Boolean,observer:"creatingNewChanged"},name:{type:String,computed:"computeName(automation)"},isWide:{type:Boolean,observer:"isWideChanged"}},created:function(){this.configChanged=this.configChanged.bind(this),this._rendered=null},detached:function(){this._rendered&&window.unmountPreact(this._rendered)},configChanged:function(t){null!==this._rendered&&(this.config=t,this.errors=null,this.dirty=!0,this._updateComponent(t))},automationChanged:function(t,i){t&&(this.hass?i&&i.attributes.id===t.attributes.id||this.hass.callApi("get","config/automation/config/"+t.attributes.id).then(function(t){["trigger","condition","action"].forEach(function(i){var e=t[i];e&&!Array.isArray(e)&&(t[i]=[e])}),this.dirty=!1,this.config=t,this._updateComponent()}.bind(this)):setTimeout(this.automationChanged.bind(this,t,i),0))},creatingNewChanged:function(t){t&&(this.dirty=!1,this.config={alias:"New Automation",trigger:[{platform:"state"}],condition:[],action:[{service:""}]},this._updateComponent())},isWideChanged:function(){null!==this.config&&this._updateComponent()},backTapped:function(){this.dirty&&!confirm("You have unsaved changes. Are you sure you want to leave?")||history.back()},_updateComponent:function(){this._rendered=window.AutomationEditor(this.$.root,{automation:this.config,onChange:this.configChanged,isWide:this.isWide},this._rendered)},saveAutomation:function(){var t=this.creatingNew?""+Date.now():this.automation.attributes.id;this.hass.callApi("post","config/automation/config/"+t,this.config).then(function(){this.dirty=!1,this.creatingNew&&(history.replaceState(null,null,"/config/automation/edit/"+t),this.fire("location-changed"))}.bind(this),function(t){throw this.errors=t.body.message,t}.bind(this))},computeName:function(t){return t&&window.hassUtil.computeStateName(t)}});</script><dom-module id="ha-config-automation" assetpath="automation/"><template><style>ha-automation-picker,
      ha-automation-editor{height:100%;}</style><app-route route="[[route]]" pattern="/edit/:automation" data="{{_routeData}}" active="{{_edittingAutomation}}"></app-route><app-route route="[[route]]" pattern="/new" active="{{_creatingNew}}"></app-route><template is="dom-if" if="[[!showEditor]]"><ha-automation-picker narrow="[[narrow]]" show-menu="[[showMenu]]" automations="[[automations]]" is-wide="[[isWide]]"></ha-automation-picker></template><template is="dom-if" if="[[showEditor]]" restamp=""><ha-automation-editor hass="[[hass]]" automation="[[automation]]" is-wide="[[isWide]]" creating-new="[[_creatingNew]]"></ha-automation-editor></template></template></dom-module><script>Polymer({is:"ha-config-automation",properties:{hass:Object,narrow:Boolean,showMenu:Boolean,route:Object,isWide:Boolean,_routeData:Object,_routeMatches:Boolean,_creatingNew:Boolean,_edittingAutomation:Boolean,automations:{type:Array,computed:"computeAutomations(hass)"},automation:{type:Object,computed:"computeAutomation(automations, _edittingAutomation, _routeData)"},showEditor:{type:Boolean,computed:"computeShowEditor(_edittingAutomation, _creatingNew)"}},computeAutomation:function(t,o,e){if(!t||!o)return null;for(var a=0;a<t.length;a++)if(t[a].attributes.id===e.automation)return t[a];return null},computeAutomations:function(t){var o=[];return Object.keys(t.states).forEach(function(e){var a=t.states[e];"automation"===window.hassUtil.computeDomain(a)&&"id"in a.attributes&&o.push(a)}),o.sort(function(t,o){var e=(t.attributes.alias||t.entity_id).toLowerCase(),a=(o.attributes.alias||o.entity_id).toLowerCase();return e<a?-1:e>a?1:0})},computeShowEditor:function(t,o){return o||t}});</script><dom-module id="ha-script-picker" assetpath="script/"><template><style include="ha-style">:host{display:block;}paper-item{cursor:pointer;}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;}paper-fab[is-wide]{bottom:24px;right:24px;}a{color:var(--primary-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Scripts</div></app-toolbar></app-header><ha-config-section is-wide="[[isWide]]"><div slot="header">Script editor</div><div slot="introduction">The script editor allows you to create and edit scripts. Please read <a href="https://home-assistant.io/docs/scripts/editor/" target="_blank">the instructions</a> to make sure that you have configured Home Assistant correctly.</div><paper-card heading="Pick script to edit"><template is="dom-if" if="[[!scripts.length]]"><div class="card-content"><p>We couldn't find any editable scripts.</p></div></template><template is="dom-repeat" items="[[scripts]]" as="script"><paper-item><paper-item-body two-line="" on-tap="scriptTapped"><div>[[computeName(script)]]</div><div secondary="">[[computeDescription(script)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></paper-card></ha-config-section><paper-fab is-wide$="[[isWide]]" icon="mdi:plus" title="Add Script" on-tap="addScript"></paper-fab></app-header-layout></template></dom-module><script>Polymer({is:"ha-script-picker",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},scripts:{type:Array},isWide:{type:Boolean}},scriptTapped:function(t){history.pushState(null,null,"/config/script/edit/"+this.scripts[t.model.index].entity_id),this.fire("location-changed")},addScript:function(){history.pushState(null,null,"/config/script/new"),this.fire("location-changed")},computeName:function(t){return window.hassUtil.computeStateName(t)},computeDescription:function(t){return""},_backTapped:function(){history.back()}});</script><script>var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function e(){}function n(n,t){var o,r,a,i,l=q;for(i=arguments.length;i-- >2;)V.push(arguments[i]);for(t&&null!=t.children&&(V.length||V.push(t.children),delete t.children);V.length;)if((r=V.pop())&&void 0!==r.pop)for(i=r.length;i--;)V.push(r[i]);else"boolean"==typeof r&&(r=null),(a="function"!=typeof n)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(a=!1)),a&&o?l[l.length-1]+=r:l===q?l=[r]:l.push(r),o=a;var u=new e;return u.nodeName=n,u.children=l,u.attributes=null==t?void 0:t,u.key=null==t?void 0:t.key,void 0!==M.vnode&&M.vnode(u),u}function t(e,n){for(var t in n)e[t]=n[t];return e}function o(e){!e._dirty&&(e._dirty=!0)&&1==H.push(e)&&(M.debounceRendering||z)(r)}function r(){var e,n=H;for(H=[];e=n.pop();)e._dirty&&O(e)}function a(e,n,t){return"string"==typeof n||"number"==typeof n?void 0!==e.splitText:"string"==typeof n.nodeName?!e._componentConstructor&&i(e,n.nodeName):t||e._componentConstructor===n.nodeName}function i(e,n){return e.normalizedNodeName===n||e.nodeName.toLowerCase()===n.toLowerCase()}function l(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===n[r]&&(n[r]=o[r]);return n}function u(e,n){var t=n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t.normalizedNodeName=e,t}function p(e){var n=e.parentNode;n&&n.removeChild(e)}function s(e,n,t,o,r){if("className"===n&&(n="class"),"key"===n);else if("ref"===n)t&&t(null),o&&o(e);else if("class"!==n||r)if("style"===n){if(o&&"string"!=typeof o&&"string"!=typeof t||(e.style.cssText=o||""),o&&"object"===(void 0===o?"undefined":D(o))){if("string"!=typeof t)for(var a in t)a in o||(e.style[a]="");for(var a in o)e.style[a]="number"==typeof o[a]&&!1===I.test(a)?o[a]+"px":o[a]}}else if("dangerouslySetInnerHTML"===n)o&&(e.innerHTML=o.__html||"");else if("o"==n[0]&&"n"==n[1]){var i=n!==(n=n.replace(/Capture$/,""));n=n.toLowerCase().substring(2),o?t||e.addEventListener(n,d,i):e.removeEventListener(n,d,i),(e._listeners||(e._listeners={}))[n]=o}else if("list"!==n&&"type"!==n&&!r&&n in e)c(e,n,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(n);else{var l=r&&n!==(n=n.replace(/^xlink\:?/,""));null==o||!1===o?l?e.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):e.removeAttribute(n):"function"!=typeof o&&(l?e.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),o):e.setAttribute(n,o))}else e.className=o||""}function c(e,n,t){try{e[n]=t}catch(e){}}function d(e){return this._listeners[e.type](M.event&&M.event(e)||e)}function f(){for(var e;e=J.pop();)M.afterMount&&M.afterMount(e),e.componentDidMount&&e.componentDidMount()}function h(e,n,t,o,r,a){K++||(R=null!=r&&void 0!==r.ownerSVGElement,G=null!=e&&!("__preactattr_"in e));var i=v(e,n,t,o,a);return r&&i.parentNode!==r&&r.appendChild(i),--K||(G=!1,a||f()),i}function v(e,n,t,o,r){var a=e,l=R;if(null!=n&&"boolean"!=typeof n||(n=""),"string"==typeof n||"number"==typeof n)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=n&&(e.nodeValue=n):(a=document.createTextNode(n),e&&(e.parentNode&&e.parentNode.replaceChild(a,e),_(e,!0))),a.__preactattr_=!0,a;var p=n.nodeName;if("function"==typeof p)return w(e,n,t,o);if(R="svg"===p||"foreignObject"!==p&&R,p=String(p),(!e||!i(e,p))&&(a=u(p,R),e)){for(;e.firstChild;)a.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(a,e),_(e,!0)}var s=a.firstChild,c=a.__preactattr_,d=n.children;if(null==c){c=a.__preactattr_={};for(var f=a.attributes,h=f.length;h--;)c[f[h].name]=f[h].value}return!G&&d&&1===d.length&&"string"==typeof d[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=d[0]&&(s.nodeValue=d[0]):(d&&d.length||null!=s)&&g(a,d,t,o,G||null!=c.dangerouslySetInnerHTML),y(a,n.attributes,c),R=l,a}function g(e,n,t,o,r){var i,l,u,s,c,d=e.childNodes,f=[],h={},g=0,b=0,y=d.length,m=0,C=n?n.length:0;if(0!==y)for(w=0;w<y;w++){var k=d[w],x=k.__preactattr_;null!=(O=C&&x?k._component?k._component.__key:x.key:null)?(g++,h[O]=k):(x||(void 0!==k.splitText?!r||k.nodeValue.trim():r))&&(f[m++]=k)}if(0!==C)for(w=0;w<C;w++){c=null;var O=(s=n[w]).key;if(null!=O)g&&void 0!==h[O]&&(c=h[O],h[O]=void 0,g--);else if(!c&&b<m)for(i=b;i<m;i++)if(void 0!==f[i]&&a(l=f[i],s,r)){c=l,f[i]=void 0,i===m-1&&m--,i===b&&b++;break}c=v(c,s,t,o),u=d[w],c&&c!==e&&c!==u&&(null==u?e.appendChild(c):c===u.nextSibling?p(u):e.insertBefore(c,u))}if(g)for(var w in h)void 0!==h[w]&&_(h[w],!1);for(;b<=m;)void 0!==(c=f[m--])&&_(c,!1)}function _(e,n){var t=e._component;t?S(t):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==n&&null!=e.__preactattr_||p(e),b(e))}function b(e){for(e=e.lastChild;e;){var n=e.previousSibling;_(e,!0),e=n}}function y(e,n,t){var o;for(o in t)n&&null!=n[o]||null==t[o]||s(e,o,t[o],t[o]=void 0,R);for(o in n)"children"===o||"innerHTML"===o||o in t&&n[o]===("value"===o||"checked"===o?e[o]:t[o])||s(e,o,t[o],t[o]=n[o],R)}function m(e){var n=e.constructor.name;(F[n]||(F[n]=[])).push(e)}function C(e,n,t){var o,r=F[e.name];if(e.prototype&&e.prototype.render?(o=new e(n,t),P.call(o,n,t)):((o=new P(n,t)).constructor=e,o.render=k),r)for(var a=r.length;a--;)if(r[a].constructor===e){o.nextBase=r[a].nextBase,r.splice(a,1);break}return o}function k(e,n,t){return this.constructor(e,t)}function x(e,n,t,r,a){e._disable||(e._disable=!0,(e.__ref=n.ref)&&delete n.ref,(e.__key=n.key)&&delete n.key,!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=n,e._disable=!1,0!==t&&(1!==t&&!1===M.syncComponentUpdates&&e.base?o(e):O(e,1,a)),e.__ref&&e.__ref(e))}function O(e,n,o,r){if(!e._disable){var a,i,u,p=e.props,s=e.state,c=e.context,d=e.prevProps||p,v=e.prevState||s,g=e.prevContext||c,b=e.base,y=e.nextBase,m=b||y,k=e._component,w=!1;if(b&&(e.props=d,e.state=v,e.context=g,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(p,s,c)?w=!0:e.componentWillUpdate&&e.componentWillUpdate(p,s,c),e.props=p,e.state=s,e.context=c),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!w){a=e.render(p,s,c),e.getChildContext&&(c=t(t({},c),e.getChildContext()));var P,N,j=a&&a.nodeName;if("function"==typeof j){var T=l(a);(i=k)&&i.constructor===j&&T.key==i.__key?x(i,T,1,c,!1):(P=i,e._component=i=C(j,T,c),i.nextBase=i.nextBase||y,i._parentComponent=e,x(i,T,0,c,!1),O(i,1,o,!0)),N=i.base}else u=m,(P=k)&&(u=e._component=null),(m||1===n)&&(u&&(u._component=null),N=h(u,a,c,o||!b,m&&m.parentNode,!0));if(m&&N!==m&&i!==k){var D=m.parentNode;D&&N!==D&&(D.replaceChild(N,m),P||(m._component=null,_(m,!1)))}if(P&&S(P),e.base=N,N&&!r){for(var U=e,A=e;A=A._parentComponent;)(U=A).base=N;N._component=U,N._componentConstructor=U.constructor}}if(!b||o?J.unshift(e):w||(e.componentDidUpdate&&e.componentDidUpdate(d,v,g),M.afterUpdate&&M.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);K||r||f()}}function w(e,n,t,o){for(var r=e&&e._component,a=r,i=e,u=r&&e._componentConstructor===n.nodeName,p=u,s=l(n);r&&!p&&(r=r._parentComponent);)p=r.constructor===n.nodeName;return r&&p&&(!o||r._component)?(x(r,s,3,t,o),e=r.base):(a&&!u&&(S(a),e=i=null),r=C(n.nodeName,s,t),e&&!r.nextBase&&(r.nextBase=e,i=null),x(r,s,1,t,o),e=r.base,i&&e!==i&&(i._component=null,_(i,!1))),e}function S(e){M.beforeUnmount&&M.beforeUnmount(e);var n=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var t=e._component;t?S(t):n&&(n.__preactattr_&&n.__preactattr_.ref&&n.__preactattr_.ref(null),e.nextBase=n,p(n),m(e),b(n)),e.__ref&&e.__ref(null)}function P(e,n){this._dirty=!0,this.context=n,this.props=e,this.state=this.state||{}}function N(e,n,t){return h(t,e,{},!1,n,!1)}function j(e,n){var t=E({},this.props[e]);n.target.value!==t[n.target.name]&&(n.target.value?t[n.target.name]=n.target.value:delete t[n.target.name],this.props.onChange(this.props.index,t))}function T(e){for(var n=Object.keys(se),t=0;t<n.length;t++)if(se[n[t]].configKey in e)return n[t];return null}var D="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof(e)},U=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},A=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),B=function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e},E=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},L=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":_typeof(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},W=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=(void 0===n?"undefined":_typeof(n))&&"function"!=typeof n?e:n},M={},V=[],q=[],z="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,I=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,H=[],J=[],K=0,R=!1,G=!1,F={};t(P.prototype,{setState:function(e,n){var r=this.state;this.prevState||(this.prevState=t({},r)),t(r,"function"==typeof e?e(r,this.props):e),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),o(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),O(this,2)},render:function(){}});var $=function(e){function t(e){U(this,t);var n=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state.isValid=!0,n.state.value=JSON.stringify(e.value||{},null,2),n.onChange=n.onChange.bind(n),n}return L(t,P),A(t,[{key:"onChange",value:function(e){var n=e.target.value,t=void 0,o=void 0;try{t=JSON.parse(n),o=!0}catch(e){o=!1}this.setState({value:n,isValid:o}),o&&this.props.onChange(t)}},{key:"componentWillReceiveProps",value:function(e){var n=e.value;this.setState({value:JSON.stringify(n,null,2),isValid:!0})}},{key:"render",value:function(e,t){var o=e.label,r=t.value,a={minWidth:300,width:"100%"};return t.isValid||(a.border="1px solid red"),n("paper-textarea",{label:o,value:r,style:a,"onvalue-changed":this.onChange})}}]),t}(),Z=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return L(t,P),A(t,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,E({},this.props.action,{data:e}))}},{key:"render",value:function(e){var t=e.action,o=t.alias,r=t.service,a=t.data;return n("div",null,n("paper-input",{label:"Alias",name:"alias",value:o,onChange:this.onChange}),n("paper-input",{label:"Service",name:"service",value:r,onChange:this.onChange}),n($,{label:"Service Data",value:a,onChange:this.serviceDataChanged}))}}]),t}();Z.configKey="service",Z.defaultConfig={alias:"",service:"",data:{}};var Q=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e}return L(t,P),A(t,[{key:"render",value:function(e){var t=e.condition,o=t.entity_id,r=t.state,a=t.for;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),n("paper-input",{label:"State",name:"state",value:r,onChange:this.onChange}),a&&n("pre",null,"For: ",JSON.stringify(a,null,2)))}}]),t}();Q.defaultConfig={entity_id:"",state:""};var X=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e}return L(t,P),A(t,[{key:"render",value:function(e){var t=e.condition,o=t.value_template,r=t.entity_id,a=t.below,i=t.above;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:r,onChange:this.onChange}),n("paper-input",{label:"Above",name:"above",value:i,onChange:this.onChange}),n("paper-input",{label:"Below",name:"below",value:a,onChange:this.onChange}),n("paper-textarea",{label:"Value template (optional)",name:"value_template",value:o,"onvalue-changed":this.onChange}))}}]),t}();X.defaultConfig={entity_id:""};var Y=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e.afterPicked=e.radioGroupPicked.bind(e,"after"),e.beforePicked=e.radioGroupPicked.bind(e,"before"),e}return L(t,P),A(t,[{key:"radioGroupPicked",value:function(e,n){var t=E({},this.props.condition);n.target.selected?t[e]=n.target.selected:delete t[e],this.props.onChange(this.props.index,t)}},{key:"render",value:function(e){var t=e.condition,o=t.after,r=t.after_offset,a=t.before,i=t.before_offset;return n("div",null,n("label",{id:"beforelabel"},"Before:"),n("paper-radio-group",{"allow-empty-selection":!0,selected:a,"aria-labelledby":"beforelabel","onpaper-radio-group-changed":this.beforePicked},n("paper-radio-button",{name:"sunrise"},"Sunrise"),n("paper-radio-button",{name:"sunset"},"Sunset")),n("paper-input",{label:"Before offset (optional)",name:"before_offset",value:i,onChange:this.onChange,disabled:void 0===a}),n("label",{id:"afterlabel"},"After:"),n("paper-radio-group",{"allow-empty-selection":!0,selected:o,"aria-labelledby":"afterlabel","onpaper-radio-group-changed":this.afterPicked},n("paper-radio-button",{name:"sunrise"},"Sunrise"),n("paper-radio-button",{name:"sunset"},"Sunset")),n("paper-input",{label:"After offset (optional)",name:"after_offset",value:r,onChange:this.onChange,disabled:void 0===o}))}}]),t}();Y.defaultConfig={};var ee=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e}return L(t,P),A(t,[{key:"render",value:function(e){return n("div",null,n("paper-textarea",{label:"Value Template",name:"value_template",value:e.condition.value_template,"onvalue-changed":this.onChange}))}}]),t}();ee.defaultConfig={value_template:""};var ne=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e}return L(t,P),A(t,[{key:"render",value:function(e){var t=e.condition,o=t.after,r=t.before;return n("div",null,n("paper-input",{label:"After",name:"after",value:o,onChange:this.onChange}),n("paper-input",{label:"Before",name:"before",value:r,onChange:this.onChange}))}}]),t}();ne.defaultConfig={};var te=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e}return L(t,P),A(t,[{key:"render",value:function(e){var t=e.condition,o=t.entity_id,r=t.zone;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),n("paper-input",{label:"Zone entity id",name:"zone",value:r,onChange:this.onChange}))}}]),t}();te.defaultConfig={entity_id:"",zone:""};var oe={state:Q,numeric_state:X,sun:Y,template:ee,time:ne,zone:te},re=Object.keys(oe).sort(),ae=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return L(t,P),A(t,[{key:"typeChanged",value:function(e){var n=e.target.selectedItem.innerHTML;n!==this.props.condition.condition&&this.props.onChange(this.props.index,E({condition:n},oe[n].defaultConfig))}},{key:"render",value:function(e){var t=e.index,o=e.condition,r=e.onChange,a=oe[o.condition],i=re.indexOf(o.condition);return a?n("div",null,n("paper-dropdown-menu-light",{label:"Condition Type","no-animations":!0},n("paper-listbox",{slot:"dropdown-content",selected:i,"oniron-select":this.typeChanged},re.map(function(e){return n("paper-item",null,e)}))),n(a,{index:t,condition:o,onChange:r})):n("div",null,"Unsupported condition: ",o.condition,n("pre",null,JSON.stringify(o,null,2)))}}]),t}(),ie=function(e){function t(){return U(this,t),W(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,P),A(t,[{key:"render",value:function(e){var t=e.action,o=e.index,r=e.onChange;return n(ae,{condition:t,onChange:r,index:o})}}]),t}();ie.configKey="condition",ie.defaultConfig=E({condition:"state"},Q.defaultConfig);var le=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"action"),e}return L(t,P),A(t,[{key:"render",value:function(e){return n("div",null,n("paper-input",{label:"Delay",name:"delay",value:e.action.delay,onChange:this.onChange}))}}]),t}();le.configKey="delay",le.defaultConfig={delay:""};var ue=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return L(t,P),A(t,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,E({},this.props.action,{data:e}))}},{key:"render",value:function(e){var t=e.action,o=t.event,r=t.event_data;return n("div",null,n("paper-input",{label:"Event",name:"event",value:o,onChange:this.onChange}),n($,{label:"Service Data",value:r,onChange:this.serviceDataChanged}))}}]),t}();ue.configKey="event",ue.defaultConfig={event:"",event_data:{}};var pe=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"action"),e.onTemplateChange=e.onTemplateChange.bind(e),e}return L(t,P),A(t,[{key:"onTemplateChange",value:function(e){this.props.onChange(this.props.index,E({},this.props.trigger,B({},e.target.name,e.target.value)))}},{key:"render",value:function(e){var t=e.action,o=t.wait_template,r=t.timeout;return n("div",null,n("paper-textarea",{label:"Wait Template",name:"wait_template",value:o,"onvalue-changed":this.onTemplateChange}),n("paper-input",{label:"Timeout (Optional)",name:"timeout",value:r,onChange:this.onChange}))}}]),t}();pe.configKey="wait_template",pe.defaultConfig={wait_template:"",timeout:""};var se={"Call Service":Z,Delay:le,Wait:pe,Condition:ie,"Fire Event":ue},ce=Object.keys(se).sort(),de=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return L(t,P),A(t,[{key:"typeChanged",value:function(e){var n=e.target.selectedItem.innerHTML;T(this.props.action)!==n&&this.props.onChange(this.props.index,se[n].defaultConfig)}},{key:"render",value:function(e){var t=e.index,o=e.action,r=e.onChange,a=T(o),i=a&&se[a],l=ce.indexOf(a);return i?n("div",null,n("paper-dropdown-menu-light",{label:"Action Type","no-animations":!0},n("paper-listbox",{slot:"dropdown-content",selected:l,"oniron-select":this.typeChanged},ce.map(function(e){return n("paper-item",null,e)}))),n(i,{index:t,action:o,onChange:r})):n("div",null,"Unsupported action",n("pre",null,JSON.stringify(o,null,2)))}}]),t}(),fe=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onDelete=e.onDelete.bind(e),e}return L(t,P),A(t,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){return n("paper-card",null,n("div",{class:"card-menu"},n("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},n("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),n("paper-listbox",{slot:"dropdown-content"},n("paper-item",{disabled:!0},"Duplicate"),n("paper-item",{onTap:this.onDelete},"Delete")))),n("div",{class:"card-content"},n(de,e)))}}]),t}(),he=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.addAction=e.addAction.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return L(t,P),A(t,[{key:"addAction",value:function(){var e=this.props.script.concat({service:""});this.props.onChange(e)}},{key:"actionChanged",value:function(e,n){var t=this.props.script.concat();null===n?t.splice(e,1):t[e]=n,this.props.onChange(t)}},{key:"render",value:function(e){var t=this;return n("div",{class:"script"},e.script.map(function(e,o){return n(fe,{index:o,action:e,onChange:t.actionChanged})}),n("paper-card",null,n("div",{class:"card-actions add-card"},n("paper-button",{onTap:this.addAction},"Add action"))))}}]),t}(),ve=function(e){function t(){U(this,t);var e=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=e.onChange.bind(e),e.sequenceChanged=e.sequenceChanged.bind(e),e}return L(t,P),A(t,[{key:"onChange",value:function(e){this.props.onChange(E({},this.props.script,B({},e.target.name,e.target.value)))}},{key:"sequenceChanged",value:function(e){this.props.onChange(E({},this.props.script,{sequence:e}))}},{key:"render",value:function(e){var t=e.script,o=e.isWide,r=t.alias,a=t.sequence;return n("div",null,n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},r),n("span",{slot:"introduction"},"Use scripts to execute a sequence of actions."),n("paper-card",null,n("div",{class:"card-content"},n("paper-input",{label:"Name",name:"alias",value:r,onChange:this.onChange})))),n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},"Sequence"),n("span",{slot:"introduction"},"The sequence of actions of this script.",n("p",null,n("a",{href:"https://home-assistant.io/docs/scripts/",target:"_blank"},"Learn more about available actions."))),n(he,{script:a,onChange:this.sequenceChanged})))}}]),t}();window.ScriptEditor=function(e,t,o){return N(n(ve,t),e,o)},window.unmountPreact=function(e,n){N(function(){return null},e,n)}}();</script><dom-module id="ha-script-editor" assetpath="script/"><template><style include="ha-style">.errors{padding:20px;font-weight:bold;color:var(--google-red-500);}.content{padding-bottom:20px;}paper-card{display:block;}.triggers,
      .script{margin-top:-16px;}.triggers paper-card,
      .script paper-card{margin-top:16px;}.add-card paper-button{display:block;text-align:center;}.card-menu{position:absolute;top:0;right:0;z-index:1;color:var(--primary-text-color);}.card-menu paper-item{cursor:pointer;}span[slot=introduction] a{color:var(--primary-color);}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;margin-bottom:-80px;transition:margin-bottom .3s;}paper-fab[is-wide]{bottom:24px;right:24px;}paper-fab[dirty]{margin-bottom:0;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="backTapped"></paper-icon-button><div main-title="">Script [[name]]</div></app-toolbar></app-header><div class="content"><template is="dom-if" if="[[errors]]"><div class="errors">[[errors]]</div></template><div id="root"></div><paper-fab is-wide$="[[isWide]]" dirty$="[[dirty]]" icon="mdi:content-save" title="Save" on-tap="saveScript"></paper-fab></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-script-editor",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},errors:{type:Object,value:null},dirty:{type:Boolean,value:!1},config:{type:Object,value:null},script:{type:Object,observer:"scriptChanged"},creatingNew:{type:Boolean,observer:"creatingNewChanged"},name:{type:String,computed:"computeName(script)"},isWide:{type:Boolean,observer:"isWideChanged"}},created:function(){this.configChanged=this.configChanged.bind(this),this._rendered=null},detached:function(){this._rendered&&window.unmountPreact(this._rendered)},configChanged:function(e){null!==this._rendered&&(this.config=e,this.errors=null,this.dirty=!0,this._updateComponent(e))},scriptChanged:function(e,t){e&&(this.hass?t&&t.entity_id===e.entity_id||this.hass.callApi("get","config/script/config/"+window.hassUtil.computeObjectId(e)).then(function(e){var t=e.sequence;t&&!Array.isArray(t)&&(e.sequence=[t]),this.dirty=!1,this.config=e,this._updateComponent()}.bind(this)):setTimeout(this.scriptChanged.bind(this,e,t),0))},creatingNewChanged:function(e){e&&(this.dirty=!1,this.config={alias:"New Script",sequence:[{service:"",data:{}}]},this._updateComponent())},isWideChanged:function(){null!==this.config&&this._updateComponent()},backTapped:function(){this.dirty&&!confirm("You have unsaved changes. Are you sure you want to leave?")||history.back()},_updateComponent:function(){this._rendered=window.ScriptEditor(this.$.root,{script:this.config,onChange:this.configChanged,isWide:this.isWide},this._rendered)},saveScript:function(){var e=this.creatingNew?""+Date.now():window.hassUtil.computeObjectId(this.script);this.hass.callApi("post","config/script/config/"+e,this.config).then(function(){this.dirty=!1,this.creatingNew&&(history.replaceState(null,null,"/config/script/edit/"+e),this.fire("location-changed"))}.bind(this),function(e){throw this.errors=e.body.message,e}.bind(this))},computeName:function(e){return e&&window.hassUtil.computeStateName(e)}});</script><dom-module id="ha-config-script" assetpath="script/"><template><style>ha-script-picker,
      ha-script-editor{height:100%;}</style><app-route route="[[route]]" pattern="/edit/:script" data="{{_routeData}}" active="{{_edittingScript}}"></app-route><app-route route="[[route]]" pattern="/new" active="{{_creatingNew}}"></app-route><template is="dom-if" if="[[!showEditor]]"><ha-script-picker narrow="[[narrow]]" show-menu="[[showMenu]]" scripts="[[scripts]]" is-wide="[[isWide]]"></ha-script-picker></template><template is="dom-if" if="[[showEditor]]" restamp=""><ha-script-editor hass="[[hass]]" script="[[script]]" is-wide="[[isWide]]" creating-new="[[_creatingNew]]"></ha-script-editor></template></template></dom-module><script>Polymer({is:"ha-config-script",properties:{hass:Object,narrow:Boolean,showMenu:Boolean,route:Object,isWide:Boolean,_routeData:Object,_routeMatches:Boolean,_creatingNew:Boolean,_edittingScript:Boolean,scripts:{type:Array,computed:"computeScripts(hass)"},script:{type:Object,computed:"computeScript(scripts, _edittingScript, _routeData)"},showEditor:{type:Boolean,computed:"computeShowEditor(_edittingScript, _creatingNew)"}},computeScript:function(t,e,o){if(!t||!e)return null;for(var r=0;r<t.length;r++)if(t[r].entity_id===o.script)return t[r];return null},computeScripts:function(t){var e=[];return Object.keys(t.states).forEach(function(o){var r=t.states[o];"script"===window.hassUtil.computeDomain(r)&&e.push(r)}),e.sort(function(t,e){var o=window.hassUtil.computeStateName(t),r=window.hassUtil.computeStateName(e);return o<r?-1:o>r?1:0})},computeShowEditor:function(t,e){return e||t}});</script><dom-module id="ha-service-description" assetpath="../../src/components/"><template>[[_getDescription(hass, domain, service)]]</template></dom-module><script>Polymer({is:"ha-service-description",properties:{hass:Object,domain:String,service:String},_getDescription:function(i,r,e){var n=i.config.services[r];if(!n)return"";var s=n[e];return s?s.description:""}});</script><dom-module id="ha-form-style"><template><style>.form-group{@apply (--layout-horizontal);@apply (--layout-center);padding:8px 16px;}.form-group label{@apply (--layout-flex-2);}.form-group .form-control{@apply (--layout-flex);}.form-group.vertical{@apply (--layout-vertical);@apply (--layout-start);}paper-dropdown-menu.form-control{margin:-9px 0;}</style></template></dom-module><dom-module id="ozw-log" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">OZW Log</span><paper-card><div class="help-text"><pre>[[ozwLogs]]</pre></div><div class="card-actions"><paper-button raised="" on-tap="refreshLog">Refresh</paper-button></div></paper-card></ha-config-section></template></dom-module><script>Polymer({is:"ozw-log",properties:{hass:{type:Object},isWide:{type:Boolean,value:!1},ozwLogs:{type:String,value:"Refresh to pull log"}},refreshLog:function(){var o=this;this.ozwLogs="Loading ozw log...",this.hass.callApi("GET","zwave/ozwlog").then(function(e){o.ozwLogs=e})}});</script><dom-module id="zwave-network" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.card-actions.warning ha-call-service-button{color:var(--google-red-500);}.toggle-help-icon{position:absolute;top:-6px;right:0;color:var(--primary-color);}ha-service-description{display:block;color:grey;}[hidden]{display:none;}</style><ha-config-section is-wide="[[isWide]]"><div style="position: relative" slot="header"><span>Z-Wave Network Management</span><paper-icon-button class="toggle-help-icon" on-tap="helpTap" icon="mdi:help-circle"></paper-icon-button></div><span slot="introduction">Run commands that affect the Z-Wave network. You won't get feedback on whether the command succeeded, but you can look in the OZW Log to try to figure out.</span><paper-card class="content"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node_secure">Add Node Secure</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="add_node_secure" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node">Add Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="add_node" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_node">Remove Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="remove_node" hidden$="[[!showDescription]]"></ha-service-description></div><div class="card-actions warning"><ha-call-service-button hass="[[hass]]" domain="zwave" service="cancel_command">Cancel Command</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="cancel_command" hidden$="[[!showDescription]]"></ha-service-description></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="heal_network">Heal Network</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="start_network">Start Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="start_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="stop_network">Stop Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="stop_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="soft_reset">Soft Reset</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="soft_reset" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="test_network">Test Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="test_network" hidden$="[[!showDescription]]"></ha-service-description></div></paper-card></ha-config-section></template></dom-module><script>Polymer({is:"zwave-network",properties:{hass:{type:Object},isWide:{type:Boolean,value:!1},showDescription:{type:Boolean,value:!1}},helpTap:function(){this.showDescription=!this.showDescription}});</script><dom-module id="zwave-node-information" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}.node-info{margin-left:16px;}paper-card{display:block;margin:0 auto;max-width:600px;}paper-button[toggles][active]{background:lightgray;}</style><div class="content"><paper-card heading="Node Information"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{nodeInfoActive}}">Show</paper-button></div><template is="dom-if" if="{{nodeInfoActive}}"><template is="dom-repeat" items="[[selectedNodeAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-node-information",properties:{nodes:{type:Array,observer:"nodeChanged"},selectedNode:{type:Number,value:-1,observer:"nodeChanged"},selectedNodeAttrs:{type:Array},nodeInfoActive:{type:Boolean}},nodeChanged:function(e){if(this.nodes&&-1!==e){var t=this.nodes[this.selectedNode].attributes,o=[];Object.keys(t).forEach(function(e){o.push(e+": "+t[e])}),this.selectedNodeAttrs=o.sort()}}});</script><dom-module id="zwave-values" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node Values"><div class="device-picker"><paper-dropdown-menu label="Value" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedValue}}"><template is="dom-repeat" items="[[values]]" as="item"><paper-item>[[computeSelectCaption(item)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsValueSelected(selectedValue)]]"><div class="card-actions"><paper-input float-label="Value Name" type="text" value="{{newValueNameInput}}" placeholder="[[computeGetValueName(selectedValue)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_value" service-data="[[computeValueNameServiceData(newValueNameInput)]]">Rename Value</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-values",properties:{hass:{type:Object},nodes:{type:Array},values:{type:Array},selectedNode:{type:Number},selectedValue:{type:Number,value:-1,observer:"selectedValueChanged"}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){var t=this;e.detail.success&&setTimeout(function(){t.refreshValues(t.selectedNode)},5e3)},computeSelectCaption:function(e){return e.value.label+" (Instance: "+e.value.instance+", Index: "+e.value.index+")"},computeGetValueName:function(e){return this.values[e].value.label},computeIsValueSelected:function(e){return!this.nodes||-1===this.selectedNode||-1===e},refreshValues:function(e){var t=[];this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(s){t.push({key:s,value:e[s]})}),this.values=t,this.selectedValueChanged(this.selectedValue)}.bind(this))},computeValueNameServiceData:function(e){return-1===!this.selectedNode||-1===this.selectedValue?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,value_id:this.values[this.selectedValue].key,name:e}},selectedValueChanged:function(e){if(-1!==!this.selectedNode&&-1!==this.selectedValue){var t=this;this.hass.callApi("GET","config/zwave/device_config/"+this.values[e].value.entity_id).then(function(s){t.entityIgnored=s.ignored||!1,t.entityPollingIntensity=t.values[e].value.poll_intensity})}}});</script><dom-module id="zwave-groups" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;padding-bottom:12px;}</style><paper-card class="content" heading="Node group associations"><div class="device-picker"><paper-dropdown-menu label="Group" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedGroup}}"><template is="dom-repeat" items="[[groups]]" as="state"><paper-item>[[computeSelectCaptionGroup(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[computeIsGroupSelected(selectedGroup)]]"><div class="device-picker"><paper-dropdown-menu label="Node to control" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedTargetNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><div class="help-text"><span>Other Nodes in this group:</span><template is="dom-repeat" items="[[otherGroupNodes]]" as="state"><div>[[state]]</div></template></div><div class="help-text"><span>Max Associations:</span> <span>[[maxAssociations]]</span></div></template><template is="dom-if" if="[[computeIsTargetNodeSelected(selectedTargetNode)]]"><div class="card-actions"><template is="dom-if" if="[[!noAssociationsLeft]]"><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;add&quot;)]]">Add To Group</ha-call-service-button></template><template is="dom-if" if="[[computeTargetInGroup(selectedGroup, selectedTargetNode)]]"><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;remove&quot;)]]">Remove From Group</ha-call-service-button></template></div></template></paper-card></template></dom-module><script>Polymer({is:"zwave-groups",properties:{hass:{type:Object},nodes:{type:Array},groups:{type:Array},selectedNode:{type:Number},selectedTargetNode:{type:Number,value:-1},selectedGroup:{type:Number,value:-1,observer:"selectedGroupChanged"},otherGroupNodes:{type:Array,value:-1,computed:"computeOtherGroupNodes(selectedGroup)"},maxAssociations:{type:String,value:"",computed:"computeMaxAssociations(selectedGroup)"},noAssociationsLeft:{type:Boolean,value:!0,computed:"computeAssociationsLeft(selectedGroup)"}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshGroups(t.selectedNode)},5e3)}},computeAssociationsLeft:function(e){return-1===e||this.maxAssociations===this.otherGroupNodes.length},computeMaxAssociations:function(e){if(-1===e)return-1;var t=this.groups[e].value.max_associations;return t||"None"},computeOtherGroupNodes:function(e){var t=this;if(-1===e)return-1;var s=Object.values(this.groups[e].value.association_instances);return s.length?s.map(function(e){if(!e.length||2!==e.length)return"Unknown Node: "+e;var s=e[0],o=e[1],i=t.nodes.find(function(e){return e.attributes.node_id===s});if(!i)return"Unknown Node (id: "+(o?s+"."+o:s)+")";var r=t.computeSelectCaption(i);return o&&(r+="/ Instance: "+o),r}):["None"]},computeTargetInGroup:function(e,t){if(-1===e||-1===t)return!1;var s=Object.values(this.groups[e].value.associations);return!!s.length&&-1!==s.indexOf(this.nodes[t].attributes.node_id)},computeSelectCaption:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"},computeSelectCaptionGroup:function(e){return e.key+": "+e.value.label},computeIsTargetNodeSelected:function(e){return this.nodes&&-1!==e},computeIsGroupSelected:function(e){return this.nodes&&-1!==this.selectedNode&&-1!==e},computeAssocServiceData:function(e,t){return-1===!this.groups||-1===e||-1===this.selectedNode?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,association:t,target_node_id:this.nodes[this.selectedTargetNode].attributes.node_id,group:this.groups[e].key}},refreshGroups:function(e){var t=[];this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(s){t.push({key:s,value:e[s]})}),this.groups=t,this.selectedGroupChanged(this.selectedGroup)}.bind(this))},selectedGroupChanged:function(e){-1!==this.selectedGroup&&-1!==e&&(this.maxAssociations=this.groups[e].value.max_associations,this.otherGroupNodes=Object.values(this.groups[e].value.associations))}});</script><dom-module id="zwave-node-config" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node config options"><template is="dom-if" if="[[wakeupNode]]"><div class="card-actions"><paper-input float-label="Wakeup Interval" type="number" value="{{wakeupInput}}" placeholder="[[computeGetWakeupValue(selectedNode)]]"><div suffix="">seconds</div></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_wakeup" service-data="[[computeWakeupServiceData(wakeupInput)]]">Set Wakeup</ha-call-service-button></div></template><div class="device-picker"><paper-dropdown-menu label="Config parameter" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedConfigParameter}}"><template is="dom-repeat" items="[[config]]" as="state"><paper-item>[[computeSelectCaptionConfigParameter(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'List')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" class="flex" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Byte Short Int')]]"><div class="card-actions"><paper-input label="{{selectedConfigParameterNumValues}}" type="number" value="{{selectedConfigValue}}" max="{{configParameterMax}}" min="{{configParameterMin}}"></paper-input></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" class="flex" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><div class="help-text"><span>[[configValueHelpText]]</span></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button Byte Short Int List')]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_config_parameter" service-data="[[computeSetConfigParameterServiceData(selectedConfigValue)]]">Set Config Parameter</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-node-config",properties:{hass:{type:Object},nodes:{type:Array,observer:"nodesChanged"},selectedNode:{type:Number,value:-1,observer:"nodesChanged"},config:{type:Array,value:function(){return[]}},selectedConfigParameter:{type:Number,value:-1,observer:"selectedConfigParameterChanged"},configParameterMax:{type:Number,value:-1},configParameterMin:{type:Number,value:-1},configValueHelpText:{type:String,value:"",computed:"computeConfigValueHelp(selectedConfigParameter)"},selectedConfigParameterType:{type:String,value:""},selectedConfigValue:{type:Number,value:-1,observer:"computeSetConfigParameterServiceData"},selectedConfigParameterValues:{type:Array,value:function(){return[]}},selectedConfigParameterNumValues:{type:String,value:""},loadedConfigValue:{type:Number,value:-1},wakeupInput:{type:Number},wakeupNode:{type:Boolean,value:!1}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshConfig(t.selectedNode)},5e3)}},nodesChanged:function(){this.nodes&&(this.wakeupNode=0===this.nodes[this.selectedNode].attributes.wake_up_interval||this.nodes[this.selectedNode].attributes.wake_up_interval,this.wakeupNode&&(0===this.nodes[this.selectedNode].attributes.wake_up_interval?this.wakeupInput="":this.wakeupInput=this.nodes[this.selectedNode].attributes.wake_up_interval))},computeGetWakeupValue:function(e){return-1!==this.selectedNode&&this.nodes[e].attributes.wake_up_interval?this.nodes[e].attributes.wake_up_interval:"unknown"},computeWakeupServiceData:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,value:e}},computeConfigValueHelp:function(e){if(-1===e)return"";var t=this.config[e].value.help;return t||["No helptext available"]},computeSetConfigParameterServiceData:function(e){if(-1===this.selectedNode||-1===this.selectedConfigParameter)return-1;var t=null;return"Short Byte Int".includes(this.selectedConfigParameterType)&&(t=parseInt(e,10)),"Bool Button".includes(this.selectedConfigParameterType)&&(t=this.selectedConfigParameterValues[e]),"List"===this.selectedConfigParameterType&&(t=this.selectedConfigParameterValues[e]),{node_id:this.nodes[this.selectedNode].attributes.node_id,parameter:this.config[this.selectedConfigParameter].key,value:t}},selectedConfigParameterChanged:function(e){-1!==e&&(this.selectedConfigValue=-1,this.loadedConfigValue=-1,this.selectedConfigParameterValues=[],this.selectedConfigParameterType=this.config[e].value.type,this.configParameterMax=this.config[e].value.max,this.configParameterMin=this.config[e].value.min,this.loadedConfigValue=this.config[e].value.data,this.configValueHelpText=this.config[e].value.help,"Short Byte Int".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterNumValues=this.config[e].value.data_items,this.selectedConfigValue=this.loadedConfigValue),"Bool Button".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=["True","False"],this.config[e].value.data?this.loadedConfigValue="True":this.loadedConfigValue="False"),"List".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=this.config[e].value.data_items))},isConfigParameterSelected:function(e,t){return-1!==e&&(this.config[e].value.type===t||!!t.includes(this.config[e].value.type))},computeSelectCaptionConfigParameter:function(e){return e.key+": "+e.value.label},refreshConfig:function(e){var t=[];this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(a){t.push({key:a,value:e[a]})}),this.config=t,this.selectedConfigParameterChanged(this.selectedConfigParameter)}.bind(this))}});</script><dom-module id="zwave-usercodes" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}</style><div class="content"><paper-card heading="Node user codes"><div class="device-picker"><paper-dropdown-menu label="Code slot" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedUserCode}}"><template is="dom-repeat" items="[[userCodes]]" as="state"><paper-item>[[computeSelectCaptionUserCodes(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isUserCodeSelected(selectedUserCode)]]"><div class="card-actions"><paper-input label="User code" type="number" value="{{selectedUserCodeValue}}" maxlength="{{userCodeMaxLen}}" min="0"></paper-input></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="lock" service="set_usercode" service-data="[[computeUserCodeServiceData(selectedUserCodeValue, &quot;Add&quot;)]]">Set Usercode</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="lock" service="clear_usercode" service-data="[[computeUserCodeServiceData(selectedUserCode, &quot;Delete&quot;)]]">Delete Usercode</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-usercodes",properties:{hass:{type:Object},nodes:{type:Array},selectedNode:{type:Number},userCodes:{type:Object},userCodeMaxLen:{type:Number,value:4},selectedUserCode:{type:Number,value:-1,observer:"selectedUserCodeChanged"},selectedUserCodeValue:{type:Number,value:-1}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var s=this;setTimeout(function(){s.refreshUserCodes(s.selectedNode)},5e3)}},isUserCodeSelected:function(e){return-1!==e},computeSelectCaptionUserCodes:function(e){return e.key+": "+e.value.label},selectedUserCodeChanged:function(e){if(-1!==this.selectedUserCode&&-1!==e){var s=parseInt(this.userCodes[e].value.code.trim());this.userCodeMaxLen=this.userCodes[e].value.length,isNaN(s)?this.selectedUserCodeValue="":this.selectedUserCodeValue=s}},computeUserCodeServiceData:function(e,s){if(-1===this.selectedNode||!e)return-1;var t=null,d=null;return"Add"===s&&(d=e,t={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode,usercode:d}),"Delete"===s&&(t={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode}),t},refreshUserCodes:function(e){this.selectedUserCodeValue="";var s=[];this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(t){s.push({key:t,value:e[t]})}),this.userCodes=s,this.selectedUserCodeChanged(this.selectedUserCode)}.bind(this))}});</script><dom-module id="ha-config-zwave" assetpath="zwave/"><template><style include="iron-flex ha-style ha-form-style">.content{margin-top:24px;}.node-info{margin-left:16px;}.help-text{padding-left:24px;padding-right:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}ha-service-description{display:block;color:grey;}[hidden]{display:none;}.toggle-help-icon{position:absolute;top:6px;right:0;color:var(--primary-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Z-Wave Manager</div></app-toolbar></app-header><zwave-network id="zwave-network" is-wide="[[isWide]]" hass="[[hass]]"></zwave-network><ha-config-section is-wide="[[isWide]]"><div style="position: relative" slot="header"><span>Z-Wave Node Management</span><paper-icon-button class="toggle-help-icon" on-tap="toggleHelp" icon="mdi:help-circle"></paper-icon-button></div><span slot="introduction">Run Z-Wave commands that affect a single node. Pick a node to see a list of available commands.</span><paper-card class="content"><div class="device-picker"><paper-dropdown-menu label="Nodes" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsNodeSelected(selectedNode)]]"><template is="dom-if" if="[[showHelp]]"><div style="color: grey; padding: 12px">Select node to view per-node options</div></template></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_node" service-data="[[computeNodeServiceData(selectedNode)]]">Refresh Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="refresh_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]">Remove Failed Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="remove_failed_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="replace_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]">Replace Failed Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="replace_failed_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="print_node" service-data="[[computeNodeServiceData(selectedNode)]]">Print Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="print_node" hidden$="[[!showHelp]]"></ha-service-description></div><div class="card-actions"><paper-input float-label="New node name" type="text" value="{{newNodeNameInput}}" placeholder="[[computeGetNodeName(selectedNode)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_node" service-data="[[computeNodeNameServiceData(newNodeNameInput)]]">Rename Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="rename_node" hidden$="[[!showHelp]]"></ha-service-description></div><div class="device-picker"><paper-dropdown-menu label="Entities of this node" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedEntity}}"><template is="dom-repeat" items="[[entities]]" as="state"><paper-item>[[computeSelectCaptionEnt(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsEntitySelected(selectedEntity)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_entity" service-data="[[computeRefreshEntityServiceData(selectedEntity)]]">Refresh Entity</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="refresh_entity" hidden$="[[!showHelp]]"></ha-service-description></div><div class="form-group"><paper-checkbox checked="{{entityIgnored}}" class="form-control">Exclude this entity from Home Assistant</paper-checkbox><paper-input disabled="{{entityIgnored}}" label="Polling intensity" type="number" min="0" value="{{entityPollingIntensity}}"></paper-input></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_poll_intensity" service-data="[[computePollIntensityServiceData(entityPollingIntensity)]]">Save</ha-call-service-button></div><div class="content"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{entityInfoActive}}">Entity Attributes</paper-button></div><template is="dom-if" if="{{entityInfoActive}}"><template is="dom-repeat" items="[[selectedEntityAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></div></template></template></paper-card><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-node-information id="zwave-node-information" nodes="[[nodes]]" selected-node="[[selectedNode]]"></zwave-node-information><zwave-values hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" values="[[values]]"></zwave-values><zwave-groups hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" groups="[[groups]]"></zwave-groups><zwave-node-config hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" config="[[config]]"></zwave-node-config></template></ha-config-section><template is="dom-if" if="{{hasNodeUserCodes}}"><zwave-usercodes id="zwave-usercodes" hass="[[hass]]" nodes="[[nodes]]" user-codes="[[userCodes]]" selected-node="[[selectedNode]]"></zwave-usercodes></template><ozw-log is-wide="[[isWide]]" hass="[[hass]]"></ozw-log></app-header-layout></template></dom-module><script>Polymer({is:"ha-config-zwave",properties:{hass:Object,isWide:Boolean,nodes:{type:Array,computed:"computeNodes(hass)"},selectedNode:{type:Number,value:-1,observer:"selectedNodeChanged"},config:{type:Array,value:function(){return[]}},entities:{type:Array,computed:"computeEntities(selectedNode)"},entityInfoActive:{type:Boolean},selectedEntity:{type:Number,value:-1,observer:"selectedEntityChanged"},selectedEntityAttrs:{type:Array,computed:"computeSelectedEntityAttrs(selectedEntity)"},values:{type:Array},groups:{type:Array},newNodeNameInput:{type:String},userCodes:{type:Array,value:function(){return[]}},hasNodeUserCodes:{type:Boolean,value:!1},showHelp:{type:Boolean,value:!1},entityIgnored:{type:Boolean},entityPollingIntensity:{type:Number}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){var t=this;e.detail.success&&"set_poll_intensity"===e.detail.service&&t.saveEntity()},computeNodes:function(e){return Object.keys(e.states).map(function(t){return e.states[t]}).filter(function(e){return!e.attributes.hidden&&e.entity_id.match("zwave[.]")}).sort(window.hassUtil.sortByName)},computeEntities:function(e){if(!this.nodes||-1===e)return-1;var t=this.hass,i=this.nodes[this.selectedNode].attributes.node_id;return Object.keys(t.states).map(function(e){return t.states[e]}).filter(function(e){return void 0!==e.attributes.node_id&&(!e.attributes.hidden&&"node_id"in e.attributes&&e.attributes.node_id===i&&!e.entity_id.match("zwave[.]"))}).sort(window.hassUtil.sortByName)},selectedNodeChanged:function(e){var t=this;this.newNodeNameInput="",-1!==e&&(this.selectedConfigParameter=-1,this.selectedConfigParameterValue=-1,this.selectedGroup=-1,this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){t.config=t._objToArray(e)}),this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){t.values=t._objToArray(e)}),this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){t.groups=t._objToArray(e)}),this.hasNodeUserCodes=!1,this.notifyPath("hasNodeUserCodes"),this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){t.userCodes=t._objToArray(e),t.hasNodeUserCodes=t.userCodes.length>0,t.notifyPath("hasNodeUserCodes")}))},selectedEntityChanged:function(e){if(-1!==e){var t=this;t.hass.callApi("GET","zwave/values/"+t.nodes[t.selectedNode].attributes.node_id).then(function(e){t.values=t._objToArray(e)});var i=t.entities[e].attributes.value_id,n=t.values.find(function(e){return e.key===i}),s=t.values.indexOf(n);t.hass.callApi("GET","config/zwave/device_config/"+i).then(function(e){t.entityIgnored=e.ignored||!1,t.entityPollingIntensity=t.values[s].value.poll_intensity})}},computeSelectedEntityAttrs:function(e){if(-1===e)return"No entity selected";var t=this.entities[e].attributes,i=[];return Object.keys(t).forEach(function(e){i.push(e+": "+t[e])}),i.sort()},computeSelectCaption:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"},computeSelectCaptionEnt:function(e){return window.hassUtil.computeDomain(e)+"."+window.hassUtil.computeStateName(e)},computeIsNodeSelected:function(){return this.nodes&&-1!==this.selectedNode},computeIsEntitySelected:function(e){return-1===e},computeNodeServiceData:function(e){return{node_id:this.nodes[e].attributes.node_id}},computeGetNodeName:function(e){return-1!==this.selectedNode&&this.nodes[e].entity_id?this.nodes[e].attributes.node_name:-1},computeNodeNameServiceData:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,name:e}},computeRefreshEntityServiceData:function(e){return-1===e?-1:{entity_id:this.entities[e].entity_id}},computePollIntensityServiceData:function(e){return-1===!this.selectedNode||-1===this.selectedEntity?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,value_id:this.entities[this.selectedEntity].attributes.value_id,poll_intensity:parseInt(e)}},saveEntity:function(){var e={ignored:this.entityIgnored,polling_intensity:parseInt(this.entityPollingIntensity)};return this.hass.callApi("POST","config/zwave/device_config/"+this.entities[this.selectedEntity].entity_id,e)},toggleHelp:function(){this.showHelp=!this.showHelp},_objToArray:function(e){var t=[];return Object.keys(e).forEach(function(i){t.push({key:i,value:e[i]})}),t},_backTapped:function(){history.back()}});</script><dom-module id="ha-customize-array" assetpath="customize/types/"><template><style>paper-dropdown-menu{margin:-9px 0;}</style><paper-dropdown-menu label="[[item.description]]" disabled="[[item.secondary]]" selected-item-label="{{item.value}}" dynamic-align=""><paper-listbox slot="dropdown-content" selected="[[computeSelected(item)]]"><template is="dom-repeat" items="[[getOptions(item)]]" as="option"><paper-item>[[option]]</paper-item></template></paper-listbox></paper-dropdown-menu></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaCustomizeArray=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"getOptions",value:function(e){var t=e.domain||"*",n=e.options[t]||e.options["*"];return n?n.sort():(this.item.type="string",this.fire("item-changed"),[])}},{key:"computeSelected",value:function(e){return this.getOptions(e).indexOf(e.value)}}],[{key:"is",get:function(){return"ha-customize-array"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeArray.is,HaCustomizeArray);</script><dom-module id="ha-customize-boolean" assetpath="customize/types/"><template><paper-checkbox disabled="[[item.secondary]]" checked="{{item.value}}">[[item.description]]</paper-checkbox></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaCustomizeBoolean=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,null,[{key:"is",get:function(){return"ha-customize-boolean"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeBoolean.is,HaCustomizeBoolean);</script><dom-module id="ha-customize-icon" assetpath="customize/types/"><template><style>:host{@apply (--layout-horizontal);}.icon-image{border:1px solid grey;padding:8px;margin-right:20px;margin-top:10px;}</style><iron-icon class="icon-image" icon="[[item.value]]"></iron-icon><paper-input auto-validate="" pattern="(mdi:.*)?" error-message="Must start with 'mdi:'" disabled="[[item.secondary]]" label="icon" value="{{item.value}}"></paper-input></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaCustomizeIcon=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,null,[{key:"is",get:function(){return"ha-customize-icon"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeIcon.is,HaCustomizeIcon);</script><dom-module id="ha-customize-key-value" assetpath="customize/types/"><template><style>:host{@apply (--layout-horizontal);}paper-input{@apply (--layout-flex);}.key{padding-right:20px;}</style><paper-input disabled="[[item.secondary]]" class="key" label="Attribute name" value="{{item.attribute}}"></paper-input><paper-input disabled="[[item.secondary]]" label="Attribute value" value="{{item.value}}"></paper-input></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaCustomizeKeyValue=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,null,[{key:"is",get:function(){return"ha-customize-key-value"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeKeyValue.is,HaCustomizeKeyValue);</script><dom-module id="ha-customize-string" assetpath="customize/types/"><template><paper-input disabled="[[item.secondary]]" label="[[getLabel(item)]]" value="{{item.value}}"></paper-input></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaCustomizeString=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"getLabel",value:function(e){return e.description+("json"===e.type?" (JSON formatted)":"")}}],[{key:"is",get:function(){return"ha-customize-string"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeString.is,HaCustomizeString);</script><dom-module id="ha-customize-attribute" assetpath="customize/"><template><style include="ha-form-style">:host{display:block;position:relative;padding-right:40px;}.button{position:absolute;margin-top:-20px;top:50%;right:0;}</style><div id="wrapper" class="form-group"></div><paper-icon-button class="button" icon="[[getIcon(item.secondary)]]" on-tap="tapButton"></paper-icon-button></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),HaCustomizeAttribute=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"tapButton",value:function(){this.item.secondary?this.item=Object.assign({},this.item,{secondary:!1}):this.item=Object.assign({},this.item,{closed:!0})}},{key:"getIcon",value:function(e){return e?"mdi:pencil":"mdi:close"}},{key:"itemObserver",value:function(e){var t=this,i=this.$.wrapper,n=window.hassAttributeUtil.TYPE_TO_TAG[e.type].toUpperCase(),r=void 0;i.lastChild&&i.lastChild.tagName===n?r=i.lastChild:(i.lastChild&&i.removeChild(i.lastChild),this.$.child=r=document.createElement(n.toLowerCase()),r.className="form-control",r.addEventListener("item-changed",function(){t.item=Object.assign({},r.item)})),r.setProperties({item:this.item}),null===r.parentNode&&i.appendChild(r)}}],[{key:"is",get:function(){return"ha-customize-attribute"}},{key:"properties",get:function(){return{item:{type:Object,notify:!0,observer:"itemObserver"}}}}]),t}();customElements.define(HaCustomizeAttribute.is,HaCustomizeAttribute);</script><dom-module id="ha-form-customize-attributes" assetpath="customize/"><template><style>[hidden]{display:none;}</style><template is="dom-repeat" items="{{attributes}}" mutable-data=""><ha-customize-attribute item="{{item}}" hidden$="[[item.closed]]"></ha-customize-attribute></template></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),HaFormCustomizeAttributes=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.MutableData(Polymer.Element)),_createClass(e,null,[{key:"is",get:function(){return"ha-form-customize-attributes"}},{key:"properties",get:function(){return{attributes:{type:Array,notify:!0}}}}]),e}();customElements.define(HaFormCustomizeAttributes.is,HaFormCustomizeAttributes);</script><dom-module id="ha-form-customize" assetpath="customize/"><template><style include="iron-flex ha-style ha-form-style">.warning{color:red;}.attributes-text{padding-left:20px;}</style><template is="dom-if" if="[[computeShowWarning(localConfig, globalConfig)]]"><div class="warning">It seems that your configuration.yaml doesn't properly include customize.yaml<br>Changes made here won't affect your configuration.</div></template><template is="dom-if" if="[[hasLocalAttributes]]"><h4 class="attributes-text">The following attributes are already set in customize.yaml<br></h4><ha-form-customize-attributes attributes="{{localAttributes}}"></ha-form-customize-attributes></template><template is="dom-if" if="[[hasGlobalAttributes]]"><h4 class="attributes-text">The following attributes are customized from outside of customize.yaml<br>Possibly via a domain, a glob or a different include.</h4><ha-form-customize-attributes attributes="{{globalAttributes}}"></ha-form-customize-attributes></template><template is="dom-if" if="[[hasExistingAttributes]]"><h4 class="attributes-text">The following attributes of the entity are set programatically.<br>You can override them if you like.</h4><ha-form-customize-attributes attributes="{{existingAttributes}}"></ha-form-customize-attributes></template><template is="dom-if" if="[[hasNewAttributes]]"><h4 class="attributes-text">The following attributes weren't set. Set them if you like.</h4><ha-form-customize-attributes attributes="{{newAttributes}}"></ha-form-customize-attributes></template><div class="form-group"><paper-dropdown-menu label="Pick an attribute to override" class="flex" dynamic-align=""><paper-listbox slot="dropdown-content" selected="{{selectedNewAttribute}}"><template is="dom-repeat" items="[[newAttributesOptions]]" as="option"><paper-item>[[option]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),HaFormCustomize=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.Element),_createClass(e,[{key:"_initOpenObject",value:function(t,e,i,r){return Object.assign({attribute:t,value:e,closed:!1,domain:window.hassUtil.computeDomain(this.entity),secondary:i,description:t},r)}},{key:"loadEntity",value:function(t){var e=this;return this.entity=t,this.hass.callApi("GET","config/customize/config/"+t.entity_id).then(function(t){e.localConfig=t.local,e.globalConfig=t.global,e.newAttributes=[]})}},{key:"saveEntity",value:function(){var t={};this.localAttributes.concat(this.globalAttributes,this.existingAttributes,this.newAttributes).forEach(function(e){if(!e.closed&&!e.secondary&&e.attribute&&e.value){var i="json"===e.type?JSON.parse(e.value):e.value;i&&(t[e.attribute]=i)}});var e=this.entity.entity_id;return this.hass.callApi("POST","config/customize/config/"+e,t)}},{key:"_computeSingleAttribute",value:function(t,e,i){var r=window.hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[t]||{type:window.hassAttributeUtil.UNKNOWN_TYPE};return this._initOpenObject(t,"json"===r.type?JSON.stringify(e):e,i,r)}},{key:"_computeAttributes",value:function(t,e,i){var r=this;return e.map(function(e){return r._computeSingleAttribute(e,t[e],i)})}},{key:"computeLocalAttributes",value:function(t){if(!t)return[];var e=Object.keys(t);return this._computeAttributes(t,e,!1)}},{key:"computeGlobalAttributes",value:function(t,e){if(!t||!e)return[];var i=Object.keys(t),r=Object.keys(e).filter(function(t){return!i.includes(t)});return this._computeAttributes(e,r,!0)}},{key:"computeExistingAttributes",value:function(t,e,i){if(!t||!e||!i)return[];var r=Object.keys(t),s=Object.keys(e),n=Object.keys(i.attributes).filter(function(t){return!r.includes(t)&&!s.includes(t)});return this._computeAttributes(i.attributes,n,!0)}},{key:"computeShowWarning",value:function(t,e){return!(!t||!e)&&Object.keys(t).some(function(i){return JSON.stringify(e[i])!==JSON.stringify(t[i])})}},{key:"filterFromAttributes",value:function(t){return function(e){return!t||t.every(function(t){return t.attribute!==e||t.closed})}}},{key:"getNewAttributesOptions",value:function(t,e,i,r){var s=this;return Object.keys(window.hassAttributeUtil.LOGIC_STATE_ATTRIBUTES).filter(function(t){var e=window.hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[t];return e&&(!e.domains||!s.entity||e.domains.includes(window.hassUtil.computeDomain(s.entity)))}).filter(this.filterFromAttributes(t)).filter(this.filterFromAttributes(e)).filter(this.filterFromAttributes(i)).filter(this.filterFromAttributes(r)).sort().concat("Other")}},{key:"selectedNewAttributeObserver",value:function(t){if(!(t<0)){var e=this.newAttributesOptions[t];if(t===this.newAttributesOptions.length-1){var i=this._initOpenObject("","",!1,{type:window.hassAttributeUtil.ADD_TYPE});return this.push("newAttributes",i),void(this.selectedNewAttribute=-1)}var r=this.localAttributes.findIndex(function(t){return t.attribute===e});if(r>=0)return this.set("localAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);if((r=this.globalAttributes.findIndex(function(t){return t.attribute===e}))>=0)return this.set("globalAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);if((r=this.existingAttributes.findIndex(function(t){return t.attribute===e}))>=0)return this.set("existingAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);if((r=this.newAttributes.findIndex(function(t){return t.attribute===e}))>=0)return this.set("newAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);var s=this._computeSingleAttribute(e,"",!1);this.push("newAttributes",s),this.selectedNewAttribute=-1}}},{key:"attributesObserver",value:function(){this.hasLocalAttributes=this.localAttributes&&this.localAttributes.some(function(t){return!t.closed}),this.hasGlobalAttributes=this.globalAttributes&&this.globalAttributes.some(function(t){return!t.closed}),this.hasExistingAttributes=this.existingAttributes&&this.existingAttributes.some(function(t){return!t.closed}),this.hasNewAttributes=this.newAttributes&&this.newAttributes.some(function(t){return!t.closed}),this.newAttributesOptions=this.getNewAttributesOptions(this.localAttributes,this.globalAttributes,this.existingAttributes,this.newAttributes)}}],[{key:"is",get:function(){return"ha-form-customize"}},{key:"properties",get:function(){return{hass:{type:Object},entity:Object,localAttributes:{type:Array,computed:"computeLocalAttributes(localConfig)"},hasLocalAttributes:Boolean,globalAttributes:{type:Array,computed:"computeGlobalAttributes(localConfig, globalConfig)"},hasGlobalAttributes:Boolean,existingAttributes:{type:Array,computed:"computeExistingAttributes(localConfig, globalConfig, entity)"},hasExistingAttributes:Boolean,newAttributes:{type:Array,value:[]},hasNewAttributes:Boolean,newAttributesOptions:Array,selectedNewAttribute:{type:Number,value:-1,observer:"selectedNewAttributeObserver"},localConfig:Object,globalConfig:Object}}},{key:"observers",get:function(){return["attributesObserver(localAttributes.*, globalAttributes.*, existingAttributes.*, newAttributes.*)"]}}]),e}();customElements.define(HaFormCustomize.is,HaFormCustomize);</script><dom-module id="ha-entity-config"><template><style include="iron-flex ha-style">paper-card{display:block;}.device-picker{@apply (--layout-horizontal);padding-bottom:24px;}.form-placeholder{@apply (--layout-vertical);@apply (--layout-center-center);height:96px;}[hidden]:{display:none;};.card-actions{@apply (--layout-horizontal);@apply (--layout-justified);}dom-if{display:none;}</style><paper-card><div class="card-content"><div class="device-picker"><paper-dropdown-menu label="[[label]]" class="flex" disabled="[[!entities.length]]"><paper-listbox slot="dropdown-content" selected="{{selectedEntity}}"><template is="dom-repeat" items="[[entities]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><div class="form-container"><template is="dom-if" if="[[computeShowPlaceholder(formState)]]"><div class="form-placeholder"><template is="dom-if" if="[[computeShowNoDevices(formState)]]">No entities found! :-(</template><template is="dom-if" if="[[computeShowSpinner(formState)]]"><paper-spinner active="" alt="[[formState]]"></paper-spinner>[[formState]]</template></div></template><div hidden$="[[!computeShowForm(formState)]]" id="form"></div></div></div><div class="card-actions"><paper-button on-tap="saveEntity" disabled="[[computeShowPlaceholder(formState)]]">SAVE</paper-button><template is="dom-if" if="[[allowDelete]]"><paper-button class="warning" on-tap="deleteEntity" disabled="[[computeShowPlaceholder(formState)]]">DELETE</paper-button></template></div></paper-card></template></dom-module><script>Polymer({is:"ha-entity-config",properties:{hass:{type:Object,observer:"hassChanged"},label:{type:String,value:"Device"},entities:{type:Array,observer:"entitiesChanged"},allowDelete:{type:Boolean,value:!1},selectedEntity:{type:Number,value:-1,observer:"entityChanged"},formState:{type:String,value:"no-devices"},config:{type:Object}},attached:function(){this.formEl=document.createElement(this.config.component),this.formEl.hass=this.hass,this.$.form.appendChild(this.formEl),this.entityChanged(this.selectedEntity)},computeSelectCaption:function(t){return this.config.computeSelectCaption?this.config.computeSelectCaption(t):window.hassUtil.computeStateName(t)},computeShowNoDevices:function(t){return"no-devices"===t},computeShowSpinner:function(t){return"loading"===t||"saving"===t},computeShowPlaceholder:function(t){return"editing"!==t},computeShowForm:function(t){return"editing"===t},hassChanged:function(t){this.formEl&&(this.formEl.hass=t)},entitiesChanged:function(t,e){if(0!==t.length)if(e){var i=e[this.selectedEntity].entity_id,n=t.findIndex(function(t){return t.entity_id===i});-1===n?this.selectedEntity=0:n!==this.selectedEntity&&(this.selectedEntity=n)}else this.selectedEntity=0;else this.formState="no-devices"},entityChanged:function(t){if(this.entities&&this.formEl){var e=this.entities[t];if(e){this.formState="loading";var i=this;this.formEl.loadEntity(e).then(function(){i.formState="editing"})}}},saveEntity:function(){this.formState="saving";var t=this;this.formEl.saveEntity().then(function(){t.formState="editing"})}});</script><dom-module id="ha-config-customize" assetpath="customize/"><template><style include="ha-style"></style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Customization</div></app-toolbar></app-header><div class$="[[computeClasses(isWide)]]"><ha-config-section is-wide="[[isWide]]"><span slot="header">Customization</span> <span slot="introduction">Tweak per-entity attributes.<br>Added/edited customizations will take effect immediately. Removed customizations will take effect when the entity is updated.</span><ha-entity-config hass="[[hass]]" label="Entity" entities="[[entities]]" config="[[entityConfig]]"></ha-entity-config></ha-config-section></div></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigCustomize=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"computeClasses",value:function(e){return e?"content":"content narrow"}},{key:"_backTapped",value:function(){history.back()}},{key:"computeEntities",value:function(e){return Object.keys(e.states).map(function(t){return e.states[t]}).sort(window.hassUtil.sortByName)}}],[{key:"is",get:function(){return"ha-config-customize"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,entities:{type:Array,computed:"computeEntities(hass)"},entityConfig:{type:Object,value:{component:"ha-form-customize",computeSelectCaption:function(e){return window.hassUtil.computeStateName(e)+" ("+window.hassUtil.computeDomain(e)+")"}}}}}}]),t}();customElements.define(HaConfigCustomize.is,HaConfigCustomize);</script></div><dom-module id="ha-panel-config"><template><style>iron-pages{height:100%;}</style><app-route route="[[route]]" pattern="/:page" data="{{_routeData}}" tail="{{_routeTail}}"></app-route><iron-media-query query="(min-width: 1040px)" query-matches="{{wide}}"></iron-media-query><iron-media-query query="(min-width: 1296px)" query-matches="{{wideSidebar}}"></iron-media-query><iron-pages selected="[[_routeData.page]]" attr-for-selected="page-name" fallback-selection="not-found" selected-attribute="visible"><ha-config-core page-name="core" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-core><ha-config-cloud page-name="cloud" route="[[_routeTail]]" hass="[[hass]]" is-wide="[[isWide]]" account="[[account]]"></ha-config-cloud><ha-config-dashboard page-name="dashboard" hass="[[hass]]" is-wide="[[isWide]]" account="[[account]]" narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-config-dashboard><ha-config-automation page-name="automation" route="[[_routeTail]]" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-automation><ha-config-script page-name="script" route="[[_routeTail]]" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-script><ha-config-zwave page-name="zwave" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-zwave><ha-config-customize page-name="customize" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-customize><hass-error-screen page-name="not-found" error="Page not found." title="Configuration"></hass-error-screen></iron-pages></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_get=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(o)},HaPanelConfig=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),window.hassUtil.isComponentLoaded(this.hass,"cloud")&&this.hass.callApi("get","cloud/account").then(function(t){e.account=t}),this.addEventListener("ha-account-refreshed",function(t){e.account=t.detail.account})}},{key:"computeIsWide",value:function(e,t,n){return e?t:n}},{key:"_routeChanged",value:function(e){""===e.path&&"/config"===e.prefix&&(history.replaceState(null,null,"/config/dashboard"),this.fire("location-changed"))}}],[{key:"is",get:function(){return"ha-panel-config"}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,showMenu:Boolean,account:{type:Object,value:null},route:{type:Object,observer:"_routeChanged"},_routeData:Object,_routeTail:Object,wide:Boolean,wideSidebar:Boolean,isWide:{type:Boolean,computed:"computeIsWide(showMenu, wideSidebar, wide)"}}}}]),t}();customElements.define(HaPanelConfig.is,HaPanelConfig);</script></body></html>