<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="domain-icon" assetpath="../../src/components/"><template><iron-icon icon="[[computeIcon(domain, state)]]"></iron-icon></template></dom-module><script>Polymer({is:"domain-icon",properties:{domain:{type:String,value:""},state:{type:String,value:""}},computeIcon:function(n,i){return window.hassUtil.domainIcon(n,i)}});</script><dom-module id="ha-logbook"><template><style is="custom-style" include="iron-flex"></style><style>:host{display:block;}.entry{@apply (--paper-font-body1);line-height:2em;}.time{width:55px;font-size:.8em;color:var(--secondary-text-color);}domain-icon{margin:0 8px 0 16px;color:var(--primary-text-color);}.message{color:var(--primary-text-color);}a{color:var(--primary-color);}</style><template is="dom-if" if="[[!entries.length]]">No logbook entries found.</template><template is="dom-repeat" items="[[entries]]"><div class="horizontal layout entry"><div class="time">[[formatTime(item.when)]]</div><domain-icon domain="[[item.domain]]" class="icon"></domain-icon><div class="message" flex=""><template is="dom-if" if="[[!item.entity_id]]"><span class="name">[[item.name]]</span></template><template is="dom-if" if="[[item.entity_id]]"><a href="#" on-tap="entityClicked" class="name">[[item.name]]</a></template><span></span> <span>[[item.message]]</span></div></div></template></template></dom-module><script>Polymer({is:"ha-logbook",properties:{hass:{type:Object},entries:{type:Array,value:[]}},formatTime:function(e){return window.hassUtil.formatTime(new Date(e))},entityClicked:function(e){e.preventDefault(),this.fire("hass-more-info",{entityId:e.model.item.entity_id})}});</script><script>!function(){var t={};Polymer({is:"ha-logbook-data",properties:{hass:{type:Object,observer:"hassChanged"},filterDate:{type:String,observer:"filterDateChanged"},isLoading:{type:Boolean,value:!0,readOnly:!0,notify:!0},entries:{type:Object,value:null,readOnly:!0,notify:!0}},hassChanged:function(t,e){!e&&this.filterDate&&this.filterDateChanged(this.filterDate)},filterDateChanged:function(t){this.hass&&(this._setIsLoading(!0),this.getDate(t).then(function(t){this._setEntries(t),this._setIsLoading(!1)}.bind(this)))},getDate:function(e){return t[e]||(t[e]=this.hass.callApi("GET","logbook/"+e).then(function(t){return t.reverse(),t},function(){return t[e]=!1,null})),t[e]}})}();</script></div><dom-module id="ha-panel-logbook"><template><style include="ha-style">.content{padding:0 16px 16px;}paper-spinner{position:absolute;top:15px;left:186px;}vaadin-date-picker{--vaadin-date-picker-clear-icon:{display:none;};margin-bottom:24px;max-width:200px;}[hidden]{display:none !important;}</style><ha-logbook-data hass="[[hass]]" is-loading="{{isLoading}}" entries="{{entries}}" filter-date="[[_computeFilterDate(_currentDate)]]"></ha-logbook-data><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">Logbook</div></app-toolbar></app-header><div class="content"><paper-spinner active="[[isLoading]]" hidden$="[[!isLoading]]" alt="Loading logbook entries"></paper-spinner><vaadin-date-picker id="picker" value="{{_currentDate}}" label="Showing entries for" disabled="[[isLoading]]"></vaadin-date-picker><ha-logbook hass="[[hass]]" entries="[[entries]]" hidden$="[[isLoading]]"></ha-logbook></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-panel-logbook",properties:{hass:{type:Object},narrow:{type:Boolean,value:!1},showMenu:{type:Boolean,value:!1},_currentDate:{type:String,value:function(){var e=new Date;return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())).toISOString().split("T")[0]}},isLoading:{type:Boolean},entries:{type:Array},datePicker:{type:Object}},attached:function(){var e=new Date;this.$.picker.set("i18n.parseDate",function(){return e}),this.$.picker.set("i18n.formatDate",function(t){return e=t,window.hassUtil.formatDate(t)})},_computeFilterDate:function(e){if(e){var t=e.split("-");return t[1]=parseInt(t[1])-1,new Date(t[0],t[1],t[2]).toISOString()}}});</script></body></html>